(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3735],{12509:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(95155);t(12115);let s=()=>(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen min-w-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-3 border-b-2 border-blue-500"})})},51047:(e,a,t)=>{Promise.resolve().then(t.bind(t,56239))},56239:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>eq});var r=t(95155),s=t(12115),l=t(42971),d=t(60760),n=t(40646),o=t(14186),i=t(54861),c=t(91788),x=t(47924),m=t(33786),b=t(17580),u=t(47863),h=t(66474),p=t(94860),g=t(46258),y=t(22732);let f="0x0000000000000000000000000000000000000000",k=(0,y.x)({id:137,name:"Polygon",nativeCurrency:{decimals:18,name:"MATIC",symbol:"MATIC"},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"Polygonscan",url:"https://polygonscan.com"}}}),w=(0,y.x)({id:80002,name:"Polygon Amoy Testnet",nativeCurrency:{decimals:18,name:"MATIC",symbol:"MATIC"},rpcUrls:{default:{http:["https://rpc-amoy.polygon.technology"]}},blockExplorers:{default:{name:"Polygonscan",url:"https://amoy.polygonscan.com/"}}}),v=(0,y.x)({id:42161,name:"Arbitrum One",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io"}}}),j=(0,y.x)({id:56,name:"BNB Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://binance.llamarpc.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com"}}}),N=(0,y.x)({id:41923,name:"Educhain",nativeCurrency:{decimals:18,name:"EDU",symbol:"EDU"},rpcUrls:{default:{http:["https://rpc.edu-chain.raas.gelato.cloud/66a13f09ceab49998f954e7bb71c7c02"]}},blockExplorers:{default:{name:"Blockscout",url:"https://educhain.blockscout.com"}}}),C=(0,y.x)({id:43114,name:"Avalanche",nativeCurrency:{decimals:18,name:"AVAX",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"Snowtrace",url:"https://snowtrace.io"}}}),A=(0,y.x)({id:10,name:"Optimism",nativeCurrency:{decimals:18,name:"OPTIMISM",symbol:"OP"},rpcUrls:{default:{http:["https://10.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"OptimismScan",url:"https://optimistic.etherscan.io"}}}),E=(0,y.x)({id:97,name:"BNB Chain Testnet",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.binance.org:8545"]}},blockExplorers:{default:{name:"BscScan Testnet",url:"https://testnet.bscscan.com"}}}),S=[k,v,j,N,A,C,E],F=e=>{let{status:a}=e;return"completed"===a?(0,r.jsx)(n.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-400"}):"pending"===a?(0,r.jsx)(o.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-amber-400"}):(0,r.jsx)(i.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400"})},T=e=>!e||e.length<10?e:"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)),D=e=>{let{isOpen:a,onClose:t}=e,[n,o]=(0,s.useState)(""),[y,f]=(0,s.useState)([]),[k,w]=(0,s.useState)(!0),[v,j]=(0,s.useState)(null),[N,C]=(0,s.useState)(null);(0,s.useEffect)(()=>{a&&(async()=>{try{w(!0);let e=await p.U.getPayrollHistory();if("success"===e.status){let a=[...e.data||[]].sort((e,a)=>new Date(a.createdAt).getTime()-new Date(e.createdAt).getTime());f(a)}else j("Failed to load transaction history")}catch(e){console.error("Error fetching payroll history:",e),j("Error loading transactions")}finally{w(!1)}})()},[a]);let A=e=>{try{let a=new Date(e);return(0,g.A)(a,{addSuffix:!0})}catch(e){return"Unknown date"}},E=e=>{C(a=>a===e?null:e)},D=(e,a)=>{var t,r;let s=S.find(a=>a.name.toLowerCase()===e.toLowerCase());if(null==s||null==(r=s.blockExplorers)||null==(t=r.default)?void 0:t.url)return"".concat(s.blockExplorers.default.url,"/tx/").concat(a);let l={Ethereum:"https://etherscan.io/tx/",Base:"https://basescan.org/tx/",Arbitrum:"https://arbiscan.io/tx/"}[e];return l?"".concat(l).concat(a):"#"},P=y.filter(e=>e.transactionHash.toLowerCase().includes(n.toLowerCase())||e.totalAmount.toLowerCase().includes(n.toLowerCase())||e.chain.toLowerCase().includes(n.toLowerCase())||e.tokenSymbol.toLowerCase().includes(n.toLowerCase())||e.company.toLowerCase().includes(n.toLowerCase()));return(0,r.jsx)(d.N,{children:a&&(0,r.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 dark:bg-black/75 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",onClick:t,children:(0,r.jsxs)(l.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-white dark:bg-gradient-to-br dark:from-gray-900 dark:to-black/95 w-[90%] md:w-[80%] lg:w-[60%] max-h-[85vh] rounded-2xl border border-gray-200 dark:border-[#a5b4fc]/20 overflow-hidden shadow-2xl shadow-black/60 backdrop-blur-xl",children:[(0,r.jsxs)("div",{className:"p-4 sm:p-5 border-b border-gray-200 dark:border-[#a5b4fc]/10 flex justify-between items-center sticky top-0 bg-white/80 dark:bg-gradient-to-br dark:from-gray-900/90 dark:to-black/95 z-10 backdrop-blur-sm",children:[(0,r.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-black dark:text-white",style:{textShadow:"dark:0 0 5px rgba(59, 130, 246, 0.4), dark:0 0 10px rgba(96, 165, 250, 0.2)"},children:"Transaction Log"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("button",{onClick:()=>{if(0===y.length)return;let e="Company,Transaction Hash,Total Amount,Token,Chain,Timestamp\n";y.forEach(a=>{e+='"'.concat(a.company,'","').concat(a.transactionHash,'","').concat(a.totalAmount,'","').concat(a.tokenSymbol,'","').concat(a.chain,'","').concat(new Date(a.createdAt).toLocaleString(),'"\n')});let a=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(a),r=document.createElement("a");r.setAttribute("hidden",""),r.setAttribute("href",t),r.setAttribute("download","payroll-transactions-".concat(new Date().toISOString().slice(0,10),".csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r)},className:"bg-gray-100 dark:bg-gray-900 backdrop-blur-sm text-black dark:text-white px-2 sm:px-3 py-1 sm:py-2 rounded-xl flex items-center space-x-1 sm:space-x-2 shadow-md hover:bg-gray-200 dark:hover:bg-gray-900 transition-all border border-gray-300 dark:border-[#a5b4fc]/20 text-xs sm:text-sm","aria-label":"Export transactions",disabled:0===y.length,children:[(0,r.jsx)(c.A,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 text-blue-600 dark:text-[#93c5fd]"}),(0,r.jsx)("span",{className:"font-bold",children:"Export"})]}),(0,r.jsx)("button",{onClick:t,className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-[#93c5fd] transition-colors p-1","aria-label":"Close modal",children:(0,r.jsx)(i.A,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"p-4 sm:p-5 overflow-y-auto max-h-[calc(85vh-80px)]",children:[(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search transactions...",value:n,onChange:e=>o(e.target.value),className:"w-full bg-gray-100 dark:bg-gray-900/80 backdrop-blur-sm border border-gray-300 dark:border-[#a5b4fc]/20 text-black dark:text-white rounded-xl py-1 sm:py-2 pl-8 sm:pl-10 pr-3 sm:pr-4 focus:outline-none focus:ring-2 focus:ring-blue-500/50 dark:focus:ring-[#60a5fa]/50 transition-all text-xs sm:text-sm placeholder-gray-500 dark:placeholder-gray-500"}),(0,r.jsx)(x.A,{className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 w-3 h-3 sm:w-4 sm:h-4 text-blue-600/60 dark:text-[#93c5fd]/60"})]}),(0,r.jsx)("div",{className:"space-y-2 sm:space-y-3 md:space-y-4",children:k?(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsxs)("div",{className:"animate-pulse flex space-x-2",children:[(0,r.jsx)("div",{className:"h-2 w-2 bg-blue-500 dark:bg-[#60a5fa] rounded-full"}),(0,r.jsx)("div",{className:"h-2 w-2 bg-blue-500 dark:bg-[#60a5fa] rounded-full"}),(0,r.jsx)("div",{className:"h-2 w-2 bg-blue-500 dark:bg-[#60a5fa] rounded-full"})]})}):v?(0,r.jsx)("p",{className:"text-center text-red-600 dark:text-red-400 py-8",children:v}):P.length>0?P.map((e,a)=>(0,r.jsxs)("div",{children:[(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-2 sm:p-3 md:p-4 rounded-xl border\n                                    ".concat(N===e._id?"border-blue-500/50 dark:border-[#60a5fa]/50 bg-blue-50/50 dark:bg-[#3b82f6]/5":"border-gray-200 dark:border-[#a5b4fc]/20 bg-white/80 dark:bg-gray-900/80","\n                                    backdrop-blur-sm hover:border-blue-500/30 dark:hover:border-[#60a5fa]/30 transition-all cursor-pointer"),onClick:()=>E(e._id),children:[(0,r.jsxs)("div",{className:"mb-2 sm:mb-0 flex-grow",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-black dark:text-white",children:T(e.transactionHash)}),(0,r.jsx)("a",{href:D(e.chain,e.transactionHash),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-[#93c5fd] hover:text-blue-700 dark:hover:text-[#60a5fa]","aria-label":"View on explorer",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(m.A,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-1",children:[(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("span",{className:"text-blue-600/60 dark:text-[#93c5fd]/60",children:"Amount:"})," ",e.totalAmount," USD (",e.tokenSymbol,")"]}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("span",{className:"text-blue-600/60 dark:text-[#93c5fd]/60",children:"Chain:"})," ",e.chain]}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("span",{className:"text-blue-600/60 dark:text-[#93c5fd]/60",children:"Employees:"})," ",e.employees.length]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 self-end sm:self-auto mt-2 sm:mt-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1 mr-2",children:[(0,r.jsx)(b.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600/80 dark:text-[#93c5fd]/80"}),N===e._id?(0,r.jsx)(u.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600 dark:text-[#93c5fd]"}):(0,r.jsx)(h.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600 dark:text-[#93c5fd]"})]}),(0,r.jsx)(F,{status:"completed"})," ",(0,r.jsx)("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-xs font-semibold bg-green-100 dark:bg-green-400/40 text-green-700 dark:text-green-500",children:A(e.createdAt)})]})]}),(0,r.jsx)(d.N,{children:N===e._id&&(0,r.jsx)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-1 mb-3 overflow-hidden",children:(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900/90 border border-gray-200 dark:border-[#a5b4fc]/20 rounded-xl p-3 md:p-4 backdrop-blur-sm",children:[(0,r.jsxs)("h4",{className:"text-sm font-semibold text-blue-600 dark:text-[#93c5fd] mb-2 flex items-center gap-2",children:[(0,r.jsx)(b.A,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Employee Payment Details"]}),(0,r.jsx)("div",{className:"max-h-48 overflow-y-auto pr-2 scrollbar-hide",children:e.employees.map((e,a)=>(0,r.jsxs)("div",{className:"py-2 flex flex-col xs:flex-row justify-between border-b border-gray-200 dark:border-[#a5b4fc]/10 last:border-0",children:[(0,r.jsx)("div",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 break-all",children:e.wallet}),(0,r.jsxs)("div",{className:"text-xs sm:text-sm text-blue-700 dark:text-[#93c5fd] mt-1 xs:mt-0",children:[e.amount," USD"]})]},a))})]})})})]},e._id)):(0,r.jsx)("p",{className:"text-center text-gray-500 dark:text-gray-400 text-xs sm:text-sm py-6",children:"No transactions found."})}),(0,r.jsxs)("div",{className:"mt-4 sm:mt-5 pt-3 sm:pt-4 border-t border-gray-200 dark:border-[#a5b4fc]/10 flex flex-col xs:flex-row items-start xs:items-center justify-between text-xs sm:text-sm gap-2 xs:gap-0",children:[(0,r.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["Showing ",P.length," transaction",1!==P.length?"s":""]}),y.length>P.length&&(0,r.jsx)("button",{onClick:()=>o(""),className:"text-blue-600 dark:text-[#93c5fd] hover:text-blue-700 dark:hover:text-[#60a5fa] transition-colors",children:"View All Transactions"})]})]})]})})})};var P=t(12318),B=t(29869),U=t(25273),L=t(54416),R=t(94870);let H=e=>{let{onAddEmployee:a,onBulkUpload:t}=e,[n,o]=(0,s.useState)(!1),i=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{i.current&&!i.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let c=[{title:"Add Employee",description:"Add a new team member to your organization",icon:P.A,onClick:()=>{a(),o(!1)}},{title:"Bulk Upload",description:"Import multiple employees from CSV/Excel",icon:B.A,onClick:()=>{t(),o(!1)}}];return(0,r.jsxs)("div",{className:"relative",ref:i,children:[(0,r.jsxs)(l.P.button,{onClick:()=>o(!n),whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-2 backdrop-blur-md \n                  bg-gray-200/30 dark:bg-white/10 border border-gray-300/50 dark:border-white/20 \n                  shadow-lg transition-all duration-300 \n                  hover:bg-gray-300/40 dark:hover:bg-gradient-to-r dark:hover:from-gray-600/30 dark:hover:to-gray-700/30 \n                  hover:border-gray-400/60 dark:hover:border-white/30 \n                  rounded-lg px-4 py-2.5 focus:outline-none\n                  ".concat(n?"bg-gray-300/40 dark:bg-white/15 border-gray-400/60 dark:border-white/30":""),children:[(0,r.jsx)(U.A,{className:"w-4 h-4 text-black dark:text-white"}),(0,r.jsx)("span",{className:"md:font-bold md:text-lg font-medium text-sm text-black dark:text-white whitespace-nowrap",children:"Quick Actions"}),n?(0,r.jsx)(L.A,{className:"w-4 h-4 text-black dark:text-white"}):(0,r.jsx)(h.A,{className:"w-4 h-4 text-black dark:text-white transition-transform ".concat(n?"rotate-180":"")})]}),(0,r.jsx)(d.N,{children:n&&(0,r.jsx)(l.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute right-0 top-full mt-2 z-50 w-72 sm:w-80 md:w-96",children:(0,r.jsxs)("div",{className:"rounded-xl p-5 overflow-hidden  bg-gradient-to-br from-gray-100/80 to-gray-200/90 dark:from-white/8 dark:to-white/3  backdrop-blur-lg border border-gray-300/50 dark:border-white/10  shadow-xl shadow-black/20 dark:shadow-black/40",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-black dark:text-white",children:"Quick Actions"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-white/70 text-xs mt-1",children:"Manage your workforce efficiently"})]}),(0,r.jsx)("div",{className:"space-y-3",children:c.map((e,a)=>(0,r.jsxs)(l.P.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*a},onClick:e.onClick,whileHover:{scale:1.01},whileTap:{scale:.99},className:"w-full group rounded-xl p-3 flex items-start gap-3 transition-all  duration-300  bg-gradient-to-br from-gray-50/50 to-gray-100/70 dark:from-white/5 dark:to-white/2  border border-gray-200/60 dark:border-white/10 shadow-md  hover:bg-gradient-to-br hover:from-gray-100/60 hover:to-gray-200/80 dark:hover:from-white/10 dark:hover:to-white/5",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg flex-shrink-0 flex items-center justify-center transform transition-all group-hover:scale-110  bg-gradient-to-br from-gray-200/50 to-gray-300/40 dark:from-white/10 dark:to-white/5  border border-gray-300/40 dark:border-white/10",children:(0,r.jsx)(e.icon,{className:"w-5 h-5 text-black dark:text-white"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-black dark:text-white group-hover:text-gray-800 dark:group-hover:text-white/90 transition-colors",children:e.title}),(0,r.jsx)(R.A,{className:"w-3.5 h-3.5 text-gray-500 dark:text-white/60 group-hover:text-gray-700 dark:group-hover:text-white/80 transition-colors"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-white/70 group-hover:text-gray-700 dark:group-hover:text-white/80 transition-colors",children:e.description})]})]},a))}),(0,r.jsx)("div",{className:"mt-4 pt-3 border-t border-gray-300/50 dark:border-white/10",children:(0,r.jsx)(l.P.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>o(!1),className:"text-xs text-gray-700 dark:text-white/80 hover:text-black dark:hover:text-white transition-colors w-full text-center py-1",children:"Close"})})]})})})]})};var I=t(35196);let M=e=>{let{onConfigurePayments:a,onAddEmployee:t,onBulkUpload:d}=e,[n,o]=(0,s.useState)(!1),{user:i,logout:c}=(0,I.A)(),[x,m]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"mb-8 w-[80%] x-4 md:px-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[(0,r.jsxs)("div",{className:"w-full md:w-auto",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-4xl font-bold text-black dark:text-white ",style:{textShadow:"0 0 5px rgba(45, 139, 117, 0.4), 0 0 10px rgba(45, 139, 117, 0.2)"},children:null==i?void 0:i.company}),(0,r.jsx)("p",{className:"md:text-lg text-sm text-black dark:text-white mt-1 ",children:"Add, Edit, Control and Process Payroll "})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-4 w-full md:w-auto",children:[(0,r.jsx)(H,{onAddEmployee:t,onBulkUpload:d}),(0,r.jsxs)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{o(!0)},className:"relative py-2.5 px-4 rounded-lg backdrop-blur-md bg-gray-200/30 dark:bg-white/10 border border-gray-300/50 dark:border-white/20 shadow-lg transition-all duration-300 hover:bg-gray-300/40 dark:hover:bg-gradient-to-r dark:hover:from-gray-600/30 dark:hover:to-gray-700/30 hover:border-gray-400/60 dark:hover:border-white/30 w-full sm:w-auto flex items-center justify-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-black dark:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,r.jsx)("span",{className:"md:font-bold font-medium text-sm md:text-lg whitespace-nowrap text-black dark:text-white",children:"Transaction Logs"})]}),(0,r.jsxs)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"relative py-2.5 px-4 rounded-lg backdrop-blur-md bg-gray-200/30 dark:bg-white/10 border border-gray-300/50 dark:border-white/20 shadow-lg transition-all duration-300 hover:bg-gray-300/40 dark:hover:bg-gradient-to-r dark:hover:from-gray-600/30 dark:hover:to-gray-700/30 hover:border-gray-400/60 dark:hover:border-white/30 w-full sm:w-auto flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-black dark:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,r.jsx)("span",{className:"md:font-bold font-medium text-sm md:text-lg whitespace-nowrap text-black dark:text-white",children:"Configure Payments"})]}),(0,r.jsxs)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>m(!0),className:"relative text-white py-2.5 px-4 rounded-lg backdrop-blur-md bg-blue-500 border border-blue-400 shadow-lg  transition-all duration-300 hover:bg-gradient-to-r hover:from-indigo-400 hover:to-indigo-600 hover:border-indigo-500 w-full sm:w-auto flex items-center justify-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,r.jsx)("span",{className:"md:font-bold font-medium text-sm md:text-lg whitespace-nowrap",children:"Logout"})]})]})]}),(0,r.jsx)(D,{isOpen:n,onClose:()=>o(!1)}),x&&(0,r.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:()=>m(!1),style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh"},children:(0,r.jsxs)(l.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:300,damping:30},onClick:e=>e.stopPropagation(),className:"bg-[#0c0f16] border border-[#22304a]/50 rounded-xl p-6 w-[20%] shadow-xl",children:[(0,r.jsx)("h3",{className:"text-[#F2F2F2] text-lg font-semibold mb-2 ",children:"Confirm Logout"}),(0,r.jsx)("p",{className:"text-gray-400 mb-4 ",children:"Are you sure you want to logout from your account?"}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-[#22304a]/50 text-gray-400 rounded-lg hover:bg-white/5  transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{c(),m(!1)},className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Logout"})]})]})})]})};var O=t(55868),z=t(39785),_=t(53904),V=t(85339),W=t(63439),X=t(2145),G=t(17990),q=t(49103),J=t(72713),Y=t(1243),K=t(13558),Q=t(62741);let $="0x0000000000000000000000000000000000000000",Z={[j.id]:"0x2c137aC6Bc804A9F798053347802F489F0025768",[v.id]:"0x2c137aC6Bc804A9F798053347802F489F0025768",[N.id]:"0xYourContractAddressOnEduchainMainnet",[k.id]:"0xYourContractAddressOnPolygonMainnet",[C.id]:"0xYourContractAddressOnAvalanche",[A.id]:"0xYourContractAddressOnOptimism",[E.id]:"0x9571BcCA765f30FF221dfB976ab530Ba44bd85AE",[w.id]:"0xA8Ef467c3242Aa4bb06e807E869137A410aa0D41"},ee={[k.id]:[{symbol:"MATIC",address:"0x0000000000000000000000000000000000001010",decimals:18,priceFeed:"0xAB594600376Ec9fD91F8e885dADF0CE036862dE0"},{symbol:"USDT.pos",address:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",decimals:6,priceFeed:"0x0A6513e40db6EB1b165753AD52E80663aeA50545"},{symbol:"USDT",address:"0x9417669fBF23357D2774e9D421307bd5eA1006d2",decimals:6,priceFeed:"0x0A6513e40db6EB1b165753AD52E80663aeA50545"},{symbol:"USDC",address:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",decimals:6,priceFeed:"0xfE4A8cc5b5B2366C1B58Bea3858e81843581b2F7"},{symbol:"USDC.e",address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",decimals:6,priceFeed:"0x5c3890e86f3E7Ed7F5390532De147953580f1605"}],[w.id]:[{symbol:"MATIC",address:"0x0000000000000000000000000000000000001010",decimals:18,priceFeed:"0x001382149eBa3441043c1c66972b4772963f5D43"},{symbol:"USDT",address:"0x2655783ed6c47Fd312D1204712A804821899E1A3",decimals:6,priceFeed:"0x3aC23DcB4eCfcBd24579e1f34542524d0E4eDeA8"},{symbol:"USDC",address:"0x41E94Eb019C0762f9Bfcf9Fb1E58725BfB0e7582",decimals:6,priceFeed:"0x1b8739bB4CdF0089d07097A9Ae5Bd274b29C6F16"}],[v.id]:[{symbol:"ETH",address:$,decimals:18,priceFeed:"0x639Fe6ab55C921f74e7fac1ee960C0B6293ba612"},{symbol:"WETH",address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",decimals:18,priceFeed:"0x639Fe6ab55C921f74e7fac1ee960C0B6293ba612"},{symbol:"USDT",address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",decimals:6,priceFeed:"0x3f3f5dF88dC9F13eac63DF89EC16ef6e7E25DdE7"},{symbol:"USDC",address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",decimals:6,priceFeed:"0x50834F3163758fcC1Df9973b6e91f0F0F0434aD3"},{symbol:"USDC.e",address:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",decimals:6,priceFeed:"0x88AC7Bca36567525A866138F03a6F6844868E0Bc"}],[j.id]:[{symbol:"BNB",address:$,decimals:18,priceFeed:"0x0567F2323251f0Aab15c8dFb1967E4e8A7D42aeE"},{symbol:"USDT",address:"0x55d398326f99059fF775485246999027B3197955",decimals:18,priceFeed:"0xB97Ad0E74fa7d920791E90258A6E2085088b4320"},{symbol:"USDC",address:"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d",decimals:18,priceFeed:"0x51597f405303C4377E36123cBc172b13269EA163"}],[N.id]:[{symbol:"EDU",address:$,decimals:18},{symbol:"USDT",address:"0x7277Cc818e3F3FfBb169c6Da9CC77Fc2d2a34895",decimals:6},{symbol:"USDC",address:"0x836d275563bAb5E93Fd6Ca62a95dB7065Da94342",decimals:6}],[C.id]:[{symbol:"AVAX",address:$,decimals:18,priceFeed:"0x0A77230d17318075983913bC2145DB16C7366156"},{symbol:"USDC",address:"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E",decimals:6,priceFeed:"0xF096872672F44d6EBA71458D74fe67F9a77a23B9"},{symbol:"USDC.e",address:"0xA7D7079b0FEaD91F3e65f86E8915Cb59c1a4C664",decimals:6},{symbol:"USDT",address:"0x9702230A8Ea53601f5cD2dc00fDBc13d4dF4A8c7",decimals:6,priceFeed:"0xEBE676ee90Fe1112671f19b6B7459bC678B67e8a"},{symbol:"USDT.e",address:"0xc7198437980c041c805A1EDcbA50c1Ce5db95118",decimals:6},{symbol:"DAI.e",address:"0xd586E7F844cEa2F87f50152665BCbc2C279D8d70",decimals:18}],[A.id]:[{symbol:"OP",address:"0x4200000000000000000000000000000000000042",decimals:18,priceFeed:"0x0D276FC14719f9292D5C1eA2198673d1f4269246"},{symbol:"ETH",address:$,decimals:6,priceFeed:"0x13e3Ee699D1909E989722E753853AE30b17e08c5"},{symbol:"USDC",address:"0x7F5c764cBc14f9669B88837ca1490cCa17c31607",decimals:6,priceFeed:"0x16a9FA2FDa030272Ce99B29CF780dFA30361E0f3"},{symbol:"USDT",address:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",decimals:6,priceFeed:"0xECef79E109e997bCA29c1c0897ec9d7b03647F5E"}],[E.id]:[{symbol:"tBNB",address:$,decimals:18,priceFeed:"0x2514895c72f50D8bd4B4F9b1110F0D6bD2c97526"},{symbol:"USDT",address:"0x337610d27c682e347c9cd60bd4b3b107c9d34ddd",decimals:18,priceFeed:"0xEca2605f0BCF2BA5966372C99837b1F182d3D620"},{symbol:"USDC",address:"0x0a385f86059e0b2a048171d78afd1f38558121f3",decimals:18,priceFeed:"0x90c069C4538adAc136E051052E14c1cD799C41B7"}]},ea=e=>{let{tokens:a,selectedToken:t,onTokenChange:l,address:d,chainId:n,isConnected:o,isLoading:i,exchangeRate:c,onExchangeRateChange:x}=e,{data:m,isLoading:b,error:u,refetch:p}=(0,K.A)({address:d,token:(null==t?void 0:t.address)===$||null==t?void 0:t.address,chainId:n,query:{enabled:o&&!!t&&!!d,retry:3,retryDelay:1e3}}),g=m?parseFloat((0,Q.Js)(m.value,m.decimals)).toFixed(4):"0",y=async()=>{if(!window.ethereum)return!1;if(t.address===$)return!0;try{return!!await window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:t.address,symbol:t.symbol,decimals:t.decimals||18}}})}catch(e){return console.error("Error adding token to wallet:",e),!1}};return((0,s.useEffect)(()=>{o&&t&&d&&p()},[null==t?void 0:t.address,p,o,d]),o)?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("select",{value:t.address,onChange:e=>{let t=a.find(a=>a.address===e.target.value);t&&l(t)},className:"w-full p-3 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-[#a5b4fc]/20 rounded-xl text-black dark:text-[#F2F2F2] focus:outline-none focus:ring-2 focus:ring-blue-500/50 dark:focus:ring-[#60a5fa]/50 transition-all text-base appearance-none backdrop-blur-sm",disabled:i,children:null==a?void 0:a.map(e=>(0,r.jsx)("option",{value:e.address,className:"bg-white dark:bg-gray-900 text-black dark:text-white",children:e.symbol},e.address))}),(0,r.jsxs)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[t.address!==$&&(0,r.jsx)("button",{onClick:y,className:"p-1.5 text-blue-600 dark:text-[#93c5fd] rounded-md hover:bg-blue-100 dark:hover:bg-[#3b82f6] transition-colors",title:"Add token to wallet",disabled:i,children:(0,r.jsx)(q.A,{className:"w-4 h-4"})}),(0,r.jsx)(h.A,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-[#a5b4fc]/20 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(z.A,{className:"w-3.5 h-3.5 text-blue-600 dark:text-[#93c5fd]"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Balance"})]}),(0,r.jsx)("button",{onClick:()=>p(),className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-[#93c5fd] transition-colors",title:"Refresh balance",disabled:b,children:(0,r.jsx)(_.A,{className:"w-3.5 h-3.5 ".concat(b?"animate-spin":"")})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"text-black dark:text-[#F2F2F2] text-sm",children:b?"Loading...":g}),(0,r.jsx)("span",{className:"text-blue-800 dark:text-[#93c5fd] text-xs px-1.5 py-0.5 bg-blue-100 dark:bg-[#3b82f6]/10 rounded",children:null==t?void 0:t.symbol})]})]}),(0,r.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-[#a5b4fc]/20 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,r.jsx)(J.A,{className:"w-3.5 h-3.5 text-blue-600 dark:text-[#93c5fd]"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Exchange Rate"})]}),(0,r.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,r.jsxs)("div",{className:"text-black dark:text-[#F2F2F2] text-sm flex items-baseline gap-1",children:[(0,r.jsx)("span",{children:"1 USD ="}),(0,r.jsx)("span",{className:"text-blue-700 dark:text-[#93c5fd]",children:i?"...":c.toFixed(4)})]}),(0,r.jsx)("span",{className:"text-blue-800 dark:text-[#93c5fd] text-xs px-1.5 py-0.5 bg-blue-100 dark:bg-[#3b82f6]/10 rounded",children:null==t?void 0:t.symbol})]})]})]}),u&&(0,r.jsxs)("div",{className:"p-2.5 bg-red-100 dark:bg-red-400/10 border border-red-300 dark:border-red-400/30 rounded-lg flex gap-2 items-center backdrop-blur-sm",children:[(0,r.jsx)(Y.A,{className:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0"}),(0,r.jsx)("p",{className:"text-red-800 dark:text-gray-200 text-xs",children:"Error fetching balance. Please check your connection."})]})]}):(0,r.jsx)("div",{className:"flex items-center justify-center py-4 rounded-lg bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-[#a5b4fc]/10 backdrop-blur-sm",children:(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Connect your wallet to select payment tokens"})})};var et=t(11681);let er=[{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"description",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"getRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],es={ETH:"ethereum",BNB:"binancecoin",tBNB:"binancecoin",MATIC:"matic-network",AVAX:"avalanche-2",USDT:"tether",USDC:"usd-coin","USDC.e":"usd-coin","USDT.e":"tether",DAI:"dai","DAI.e":"dai",WETH:"weth",WBTC:"wrapped-bitcoin",EDU:"education-ecosystem"};async function el(e){try{let a=es[e];if(!a)return console.warn("No CoinGecko ID mapping found for ".concat(e)),null;let t=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=".concat(a,"&vs_currencies=usd"),{method:"GET",headers:{Accept:"application/json"},cache:"no-store"});if(!t.ok)return console.warn("CoinGecko API response not OK: ".concat(t.status)),null;let r=await t.json();if(!r[a]||!r[a].usd)return console.warn("No price data found for ".concat(e," (").concat(a,")")),null;let s=1/r[a].usd;return console.log("CoinGecko rate for ".concat(e,": ").concat(s," (1 USD = ").concat(s," ").concat(e,")")),s}catch(a){return console.error("Error fetching price from CoinGecko for ".concat(e,":"),a),null}}async function ed(e,a,t){try{if(a.includes("USD"))return 1;try{let r=(ee[t]||[]).find(e=>e.symbol===a),s=null==r?void 0:r.priceFeed;if(!r)throw Error("Token ".concat(a," not found on chain ").concat(t));if(!s)throw Error("No price feed found for ".concat(a," on chain ").concat(t));let l=new et.NZ(s,er,e),[d,n]=await Promise.all([l.latestRoundData(),l.decimals()]),o=Number(d.answer)/10**Number(n),i=1/o;if(Number.isFinite(i)&&i>0)return console.log("Using Chainlink price feed for ".concat(a,": ").concat(i)),i;throw Error("Invalid exchange rate from Chainlink: ".concat(i))}catch(e){console.warn("Chainlink error for ".concat(a,":"),e)}let r=await el(a);if(null!==r&&r>0)return r;return console.warn("Falling back to hardcoded rates for ".concat(a)),({ETH:.001,BNB:.001,tBNB:.001,MATIC:.001,AVAX:.001,EDU:.001})[a]||.001}catch(e){if(console.error("Error in getExchangeRate:",e),a.includes("USD"))return 1;return({ETH:.001,BNB:.001,tBNB:.001,MATIC:.001,AVAX:.001,EDU:.001})[a]||.001}}var en=t(28707);let eo=e=>{let{isOpen:a,onClose:t,onExchangeRateUpdate:o}=e,{address:i,isConnected:c,chainId:x}=(0,X.F)(),m=(0,G.e)(),[b,u]=(0,s.useState)(void 0),[h,p]=(0,s.useState)(null),[g,y]=(0,s.useState)(1),[f,k]=(0,s.useState)(!1),[w,v]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null),[C,A]=(0,s.useState)(!0),E=(0,s.useRef)(null),F=(0,s.useRef)(Date.now());(0,s.useEffect)(()=>{var e,a;if(x){u(x);let e=ee[x]||[];if(e.length>0){let a=e[0];p(a),T(a,x)}else p(null),N("No tokens available for this chain")}else if(!x&&c){let a=S[0];u(a.id);let t=null==(e=ee[a.id])?void 0:e[0];t&&(p(t),T(t,a.id))}else{let e=S[0];u(e.id),p((null==(a=ee[e.id])?void 0:a[0])||null)}},[x,c]),(0,s.useEffect)(()=>(E.current&&(clearInterval(E.current),E.current=null),C&&h&&b&&a&&(E.current=setInterval(()=>{let e=Date.now();!f&&e-F.current>=3e4&&(console.log("Auto-updating exchange rate..."),F.current=e,T(h,b,!0))},5e3)),()=>{E.current&&(clearInterval(E.current),E.current=null)}),[C,h,b,a,f]),(0,s.useEffect)(()=>{a?A(!0):(A(!1),E.current&&(clearInterval(E.current),E.current=null))},[a]);let T=async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&a){t?k(!0):(k(!0),v(!1),N(null));try{let d;if(m&&"transport"in m&&"url"in m.transport)d=new en.FR(m.transport.url);else{var r,s,l;let e=S.find(e=>e.id===a);if(!(null==e||null==(l=e.rpcUrls)||null==(s=l.default)||null==(r=s.http)?void 0:r[0]))throw Error("No RPC URL found for chain ".concat(a));d=new en.FR(e.rpcUrls.default.http[0])}t||await new Promise(e=>setTimeout(e,800));let n=await ed(d,e.symbol,a);y(n),o&&o(n,e.symbol),k(!1),t||(v(!0),setTimeout(()=>{v(!1)},3e3))}catch(r){console.error("Error fetching exchange rate:",r),t||N("Failed to fetch current exchange rate. Using estimated rate instead.");try{let t=await ed(null,e.symbol,a);y(t),o&&o(t,e.symbol)}catch(t){let a=e.symbol.includes("USD")?1:.01;y(a),o&&o(a,e.symbol)}k(!1),t||(v(!0),setTimeout(()=>{v(!1),N(null)},3e3))}}};return a?(0,r.jsx)(d.N,{children:(0,r.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/75 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:t,children:(0,r.jsxs)(l.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20},onClick:e=>e.stopPropagation(),className:"bg-white dark:bg-gradient-to-br dark:from-gray-900 dark:to-black/95 w-full max-w-2xl rounded-2xl border border-gray-200 dark:border-[#a5b4fc]/20 overflow-hidden shadow-2xl shadow-black/60 backdrop-blur-xl",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-[#a5b4fc]/10",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2.5 rounded-full bg-blue-100 dark:bg-[#3b82f6]/20 shadow-inner shadow-blue-200/50 dark:shadow-[#60a5fa]/10",children:(0,r.jsx)(O.A,{className:"w-6 h-6 text-blue-600 dark:text-[#93c5fd]"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-black dark:text-white tracking-tight",children:"Configure Payments"})]}),(0,r.jsx)(l.P.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:t,className:"text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-[#93c5fd] transition-colors p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-white/5","aria-label":"Close modal",disabled:f,children:(0,r.jsx)(L.A,{className:"w-5 h-5"})})]})}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"p-5 rounded-xl border backdrop-blur-sm\n                ".concat(c?"border-blue-300 dark:border-[#60a5fa]/20 bg-blue-50/50 dark:bg-[#3b82f6]/5 shadow-md shadow-blue-500/5 dark:shadow-[#3b82f6]/5":"border-gray-200 dark:border-gray-800/60 bg-gray-50/50 dark:bg-gray-900/30"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(z.A,{className:"w-5 h-5 ".concat(c?"text-blue-600 dark:text-[#93c5fd]":"text-gray-500 dark:text-gray-500")}),(0,r.jsx)("span",{className:"font-semibold ".concat(c?"text-black dark:text-white":"text-gray-600 dark:text-gray-400"),children:"Wallet Connection"})]}),(0,r.jsx)(W.pK,{showBalance:!1,accountStatus:"avatar",chainStatus:"name"})]}),!c&&(0,r.jsx)("div",{className:"py-3 px-4 mt-3 rounded-lg bg-gray-100 dark:bg-gray-800/30 border border-gray-200 dark:border-gray-800/60",children:(0,r.jsx)("p",{className:"text-center text-gray-600 dark:text-gray-400 text-sm",children:"Connect your wallet to configure payment settings"})})]}),c&&h&&b&&(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"p-5 rounded-xl border border-gray-200 dark:border-gray-800/60 bg-white dark:bg-gradient-to-br dark:from-gray-900 dark:to-black/95 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(O.A,{className:"w-5 h-5 text-blue-600 dark:text-[#93c5fd]"}),(0,r.jsx)("span",{className:"font-semibold text-black dark:text-white",children:"Payment Token"})]}),(0,r.jsxs)("div",{className:"flex items-center px-3 py-1.5 rounded-full bg-blue-100 dark:bg-[#3b82f6]/10 border border-blue-200 dark:border-[#3b82f6]/20",children:[(0,r.jsx)(_.A,{className:"w-3.5 h-3.5 mr-2 ".concat(f?"animate-spin text-blue-600 dark:text-[#93c5fd]":"text-blue-500 dark:text-[#60a5fa]")}),(0,r.jsx)("span",{className:"text-xs text-blue-800 dark:text-[#ddd6fe]",children:"Auto-updates every 30s"})]})]}),(0,r.jsx)(ea,{tokens:ee[b]||[],selectedToken:h,onTokenChange:e=>{p(e),F.current=Date.now(),b&&T(e,b)},address:i,chainId:b,isConnected:c,isLoading:f,exchangeRate:g,onExchangeRateChange:()=>{}})]}),f&&!w&&(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"p-4 rounded-lg border border-gray-200 dark:border-gray-800/60 bg-gray-50 dark:bg-gray-900/30 backdrop-blur-sm flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-full bg-blue-100 dark:bg-[#3b82f6]/10",children:(0,r.jsx)(_.A,{className:"w-4 h-4 text-blue-600 dark:text-[#93c5fd] animate-spin"})}),(0,r.jsxs)("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:["Fetching Chainlink price feed for ",null==h?void 0:h.symbol,"..."]})]}),w&&!j&&(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"p-4 rounded-lg border border-green-300 dark:border-[#3b82f6]/20 bg-green-50 dark:bg-[#3b82f6]/5 backdrop-blur-sm flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-full bg-green-100 dark:bg-[#3b82f6]/10",children:(0,r.jsx)(n.A,{className:"w-4 h-4 text-green-600 dark:text-[#93c5fd]"})}),(0,r.jsxs)("span",{className:"text-green-800 dark:text-gray-200 text-sm",children:["Exchange rate updated from Chainlink: 1 USD = ",g.toFixed(6)," ",null==h?void 0:h.symbol]})]}),j&&(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"p-4 rounded-lg border border-amber-400 dark:border-amber-500/20 bg-amber-50 dark:bg-amber-900/10 backdrop-blur-sm flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-full bg-amber-100 dark:bg-amber-500/10",children:(0,r.jsx)(V.A,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),(0,r.jsx)("span",{className:"text-amber-800 dark:text-amber-200 text-sm",children:j})]}),(0,r.jsx)("div",{className:"p-5 rounded-lg border border-blue-200 dark:border-[#a5b4fc]/20 bg-blue-50/50 dark:bg-[#a5b4fc]/5 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"p-2 rounded-full bg-blue-100 dark:bg-[#a5b4fc]/10 mt-0.5",children:(0,r.jsx)(V.A,{className:"w-4 h-4 text-blue-600 dark:text-[#ddd6fe] flex-shrink-0"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-black dark:text-white font-medium text-sm mb-2",children:"About Exchange Rates"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:"Exchange rates are fetched from Chainlink price feeds to provide accurate market data. Employee salaries will be converted from USD to the selected token using this exchange rate."})]})]})})]})]}),(0,r.jsx)("div",{className:"px-6 py-5 border-t border-gray-200 dark:border-gray-800/60 bg-gray-50/50 dark:bg-transparent backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,className:"px-6 py-3 rounded-xl border border-gray-300 dark:border-gray-700/80 bg-white dark:bg-gray-800/50 text-black dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black dark:hover:text-white hover:border-gray-400 dark:hover:border-gray-600 transition-all duration-200 backdrop-blur-sm",disabled:f,children:f?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(_.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):"Cancel"}),c&&!f&&(0,r.jsx)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{A(!1),E.current&&(clearInterval(E.current),E.current=null),t()},className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 dark:from-[#60a5fa] dark:to-[#3b82f6] hover:from-blue-600 hover:to-blue-700 dark:hover:from-[#3b82f6] dark:hover:to-[#2563eb] text-white transition-all duration-200 shadow-lg shadow-blue-500/20 dark:shadow-[#3b82f6]/20 hover:shadow-blue-500/30 dark:hover:shadow-[#3b82f6]/30 font-medium",children:"Apply Settings"})]})})]})})}):null};var ei=t(81284),ec=t(24357);let ex=e=>{let{txError:a,isWritePending:t,isTxLoading:d,isTxSuccess:c,isTxError:x,approvalTxHash:b,isApproving:u,txHash:h,getExplorerUrl:p,needsApproval:g,selectedTokenSymbol:y,selectedEmployeesCount:f}=e,[k,w]=(0,s.useState)(!1),v=async e=>{try{await navigator.clipboard.writeText(e),w(!0),setTimeout(()=>w(!1),2e3)}catch(e){console.error("Failed to copy: ",e)}};(0,s.useEffect)(()=>{if(k){let e=setTimeout(()=>w(!1),2e3);return()=>clearTimeout(e)}},[k]);let j=t||d||u,N=j?"processing":c?"success":x||a?"error":h?"complete":"idle";return(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full bg-gradient-to-br from-gray-900 to-black/95 backdrop-blur-xl border  border-[#a5b4fc]/20 rounded-xl p-4 md:p-5 lg:p-6 transition-all  shadow-lg shadow-black/60 hover:border-[#60a5fa]/30 h-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-5",children:[(0,r.jsxs)("div",{className:"p-2 rounded-md ".concat("processing"===N?"bg-amber-500/20 animate-pulse":"success"===N?"bg-green-400/20":"error"===N?"bg-red-400/20":"bg-[#3b82f6]/20"),children:["processing"===N&&(0,r.jsx)(o.A,{className:"w-5 h-5 text-amber-400"}),"success"===N&&(0,r.jsx)(n.A,{className:"w-5 h-5 text-green-500"}),"error"===N&&(0,r.jsx)(i.A,{className:"w-5 h-5 text-red-400"}),"idle"===N&&(0,r.jsx)(ei.A,{className:"w-5 h-5 text-[#93c5fd]"})]}),(0,r.jsx)("h2",{className:"text-lg font-bold text-[#F2F2F2]",style:{textShadow:"0 0 5px rgba(59, 130, 246, 0.4), 0 0 10px rgba(96, 165, 250, 0.2)"},children:"Transaction Status"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[a&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-start gap-3 p-4 bg-red-400/10 border border-red-400/30  text-[#F2F2F2] rounded-xl text-sm backdrop-blur-sm",children:[(0,r.jsx)(V.A,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),(0,r.jsx)("div",{className:"max-h-[150px] overflow-y-auto scrollbar-hide",children:(0,r.jsx)("p",{className:"",children:a})})]}),j&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-start gap-3 p-4 bg-amber-500/10 border border-amber-500/30  text-[#F2F2F2] rounded-xl text-sm backdrop-blur-sm",children:[(0,r.jsx)(o.A,{className:"w-5 h-5 text-amber-400 animate-spin flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"max-h-[150px] overflow-y-auto scrollbar-hide",children:[(0,r.jsx)("p",{className:"font-medium mb-1 ",children:u?"Approving ".concat(y,"..."):"Processing transaction..."}),(0,r.jsx)("p",{className:"text-gray-400 ",children:"Please wait while the transaction is being processed"})]})]}),c&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-start gap-3 p-4 bg-green-400/10 border border-green-400/30  text-[#F2F2F2] rounded-xl text-sm backdrop-blur-sm",children:[(0,r.jsx)(n.A,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"max-h-[150px] overflow-y-auto scrollbar-hide",children:[(0,r.jsx)("p",{className:"font-medium mb-1 ",children:"Payment successful!"}),(0,r.jsx)("p",{className:"text-gray-400 ",children:f>0?"".concat(f," employee").concat(1!==f?"s":""," paid successfully"):"Transaction completed successfully"})]})]}),x&&!a&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-start gap-3 p-4 bg-red-400/10 border border-red-400/30  text-[#F2F2F2] rounded-xl text-sm backdrop-blur-sm",children:[(0,r.jsx)(i.A,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"max-h-[150px] overflow-y-auto scrollbar-hide",children:[(0,r.jsx)("p",{className:"font-medium mb-1 ",children:"Transaction failed"}),(0,r.jsx)("p",{className:"text-gray-400 ",children:"The transaction could not be processed. Please try again."})]})]}),b&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-4 p-4 bg-gray-900/80 backdrop-blur-sm rounded-xl border border-[#a5b4fc]/20",children:[(0,r.jsx)("p",{className:"text-gray-400 mb-2 text-sm ",children:"Approval Transaction:"}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("div",{className:"text-[#F2F2F2] text-xs truncate bg-gray-900/80 p-2 rounded-xl flex-1 overflow-x-auto scrollbar-hide",children:b}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>v(b),className:"text-[#93c5fd] hover:text-[#60a5fa] p-2 bg-gray-900/80 rounded-xl transition-colors",title:"Copy to clipboard",children:k?(0,r.jsx)(n.A,{className:"w-4 h-4"}):(0,r.jsx)(ec.A,{className:"w-4 h-4"})}),(0,r.jsx)("a",{href:p(b),target:"_blank",rel:"noopener noreferrer",className:"text-[#93c5fd] hover:text-[#60a5fa] p-2 bg-gray-900/80 rounded-xl transition-colors",title:"View on explorer",children:(0,r.jsx)(m.A,{className:"w-4 h-4"})})]})]})]}),h&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-4 p-4 bg-gray-900/80 backdrop-blur-sm rounded-xl border border-[#a5b4fc]/20",children:[(0,r.jsx)("p",{className:"text-gray-400 mb-2 text-sm ",children:"Transaction Hash:"}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("div",{className:"text-[#F2F2F2] text-xs truncate bg-gray-900/80 p-2 rounded-xl flex-1 overflow-x-auto scrollbar-hide",children:h}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>v(h),className:"text-[#93c5fd] hover:text-[#60a5fa] p-2 bg-gray-900/80 rounded-xl transition-colors",title:"Copy to clipboard",children:k?(0,r.jsx)(n.A,{className:"w-4 h-4"}):(0,r.jsx)(ec.A,{className:"w-4 h-4"})}),(0,r.jsx)("a",{href:p(h),target:"_blank",rel:"noopener noreferrer",className:"text-[#93c5fd] hover:text-[#60a5fa] p-2 bg-gray-900/80 rounded-xl transition-colors",title:"View on explorer",children:(0,r.jsx)(m.A,{className:"w-4 h-4"})})]})]})]}),g&&!j&&!c&&!x&&f>0&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-[#3b82f6]/10 border border-[#60a5fa]/30 rounded-xl text-sm flex items-start gap-2 backdrop-blur-sm",children:[(0,r.jsx)(ei.A,{className:"w-5 h-5 text-[#93c5fd] flex-shrink-0 mt-0.5"}),(0,r.jsx)("div",{className:"max-h-[150px] overflow-y-auto scrollbar-hide",children:(0,r.jsxs)("p",{className:"text-[#F2F2F2] ",children:["This transaction requires approval to use ",y,". You'll need to confirm two transactions."]})})]}),!j&&!c&&!x&&!a&&!g&&!h&&(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center p-8 bg-gray-900/80 backdrop-blur-sm rounded-xl border border-[#a5b4fc]/20",children:[(0,r.jsx)(o.A,{className:"w-10 h-10 text-gray-400 opacity-50 mb-2"}),(0,r.jsx)("p",{className:"text-gray-400 text-center",children:"No active transactions"})]})]})]})};var em=t(85213),eb=t(95488),eu=t(21492),eh=t(92657),ep=t(13717),eg=t(62525),ey=t(42355),ef=t(13052),ek=t(17576),ew=t(90437),ev=t(69074),ej=t(94631),eN=t(21934);let eC=e=>{let{isOpen:a,onClose:t,employee:i}=e,[c,x]=(0,s.useState)(!1),[m,b]=(0,s.useState)([]),[u,h]=(0,s.useState)(!1),[p,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{a&&i&&i.wallet&&f(i.wallet)},[a,i]);let f=async e=>{try{h(!0),y(null);let a=await eN.U.getEmployeePayroll(e);if("success"===a.status&&a.data){let e=a.data.map(e=>({id:e.id,amount:e.amount,date:k(e.date),status:"completed"}));b(e)}else b([]),y("No payment history found")}catch(e){console.error("Error fetching payment history:",e),y("Failed to load payment history"),b([])}finally{h(!1)}},k=e=>{try{let a=new Date(e);return(0,g.A)(a,{addSuffix:!0})}catch(e){return"Unknown date"}};if(!a||!i)return null;let w={completed:"text-green-500 bg-green-400/10",pending:"text-amber-500 bg-amber-400/10",failed:"text-red-500 bg-red-400/10"},v=e=>{let{status:a}=e;return"completed"===a?(0,r.jsx)(n.A,{className:"w-4 h-4 text-green-700  dark:text-green-400"}):"pending"===a?(0,r.jsx)(o.A,{className:"w-4 h-4 text-amber-400"}):(0,r.jsx)(V.A,{className:"w-4 h-4 text-red-400"})},j=e=>e.length<=12?e:"".concat(e.slice(0,6),"...").concat(e.slice(-6)),N=async()=>{try{await navigator.clipboard.writeText(i.wallet),x(!0),setTimeout(()=>x(!1),2e3)}catch(e){console.error("Failed to copy address:",e)}},C={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}},exit:{y:-20,opacity:0,transition:{duration:.2}}},A={hidden:{x:-20,opacity:0},visible:{x:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}},hover:{scale:1.02,transition:{type:"spring",stiffness:400,damping:10}}};return(0,r.jsx)(d.N,{children:(0,r.jsx)(l.P.div,{className:"fixed inset-0 bg-black/50 dark:bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:t,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,when:"beforeChildren",staggerChildren:.1}},exit:{opacity:0,transition:{duration:.2,when:"afterChildren",staggerChildren:.05,staggerDirection:-1}}},children:(0,r.jsxs)(l.P.div,{className:"bg-white dark:bg-gradient-to-br dark:from-gray-900 dark:to-black/95 w-full max-w-3xl rounded-2xl border border-gray-200 dark:border-[#a5b4fc]/20 overflow-hidden shadow-2xl shadow-black/60 backdrop-blur-xl",onClick:e=>e.stopPropagation(),variants:C,children:[(0,r.jsxs)(l.P.div,{className:"p-6 border-b border-gray-200 dark:border-[#a5b4fc]/10 flex items-center justify-between",variants:C,children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-black dark:text-[#F2F2F2]",style:{textShadow:"0 0 5px rgba(59, 130, 246, 0.5), 0 0 10px rgba(96, 165, 250, 0.3)"},children:"Employee Profile"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-[#93c5fd] transition-colors p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-white/5","aria-label":"Close modal",children:(0,r.jsx)(L.A,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-8",children:[(0,r.jsxs)(l.P.div,{className:"bg-gray-50 dark:bg-gray-900/80 rounded-xl p-6 border border-gray-200 dark:border-[#a5b4fc]/20 backdrop-blur-sm",variants:C,children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 dark:from-[#3b82f6]/20 dark:to-[#60a5fa]/10 flex items-center justify-center border border-blue-200 dark:border-[#60a5fa]/20",children:(0,r.jsx)("span",{className:"text-2xl font-bold text-blue-700 dark:text-[#93c5fd]",children:i.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-black dark:text-[#F2F2F2] mb-1",children:i.name}),(0,r.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,r.jsx)(ek.A,{className:"w-4 h-4 mr-2 text-blue-600 dark:text-[#93c5fd]"}),(0,r.jsx)("span",{children:i.designation})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-[#3b82f6]/10 px-4 py-3 rounded-xl text-center border border-blue-100 dark:border-[#3b82f6]/20",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center text-blue-700 dark:text-[#93c5fd] mb-1",children:[(0,r.jsx)(O.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"font-bold text-lg",children:i.salary})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Monthly Salary"})]})]}),(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-[#a5b4fc]/10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,r.jsx)(z.A,{className:"w-4 h-4 mr-2 text-blue-600 dark:text-[#93c5fd]"}),(0,r.jsx)("span",{children:"Wallet Address"})]}),(0,r.jsx)("button",{onClick:N,className:"text-sm text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-[#93c5fd] transition-colors flex items-center gap-2","aria-label":"Copy wallet address",children:c?(0,r.jsxs)("span",{className:"flex items-center text-green-700 dark:text-green-400",children:[(0,r.jsx)(ew.A,{className:"w-4 h-4 mr-1"})," Copied!"]}):(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(ec.A,{className:"w-4 h-4 mr-1"})," Copy"]})})]}),(0,r.jsx)("div",{className:"bg-gray-100 dark:bg-gray-900/90 p-3 rounded-lg border border-gray-200 dark:border-[#a5b4fc]/20",children:(0,r.jsx)("p",{className:"text-sm text-black dark:text-gray-300 break-all",children:i.wallet})})]})]}),(0,r.jsxs)(l.P.div,{variants:C,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(ev.A,{className:"w-5 h-5 text-blue-600 dark:text-[#93c5fd]"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-black dark:text-[#F2F2F2]",style:{textShadow:"0 0 5px rgba(59, 130, 246, 0.3), 0 0 10px rgba(96, 165, 250, 0.2)"},children:"Payment History"})]}),(0,r.jsx)("div",{className:"space-y-3 overflow-y-auto max-h-80 scrollbar-hide",children:u?(0,r.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,r.jsx)(ej.A,{className:"w-8 h-8 text-blue-600 dark:text-[#93c5fd] animate-spin"})}):p?(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-900/80 rounded-xl p-4 border border-gray-200 dark:border-[#a5b4fc]/20 text-center text-gray-500 dark:text-gray-400 backdrop-blur-sm",children:[(0,r.jsx)(V.A,{className:"w-6 h-6 text-gray-400 dark:text-[#93c5fd]/50 mx-auto mb-2"}),(0,r.jsx)("p",{children:p})]}):0===m.length?(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-900/80 rounded-xl p-4 border border-gray-200 dark:border-[#a5b4fc]/20 text-center text-gray-500 dark:text-gray-400 backdrop-blur-sm",children:[(0,r.jsx)(ev.A,{className:"w-6 h-6 text-gray-400 dark:text-[#93c5fd]/50 mx-auto mb-2"}),(0,r.jsx)("p",{children:"No payment history available"})]}):m.map(e=>(0,r.jsxs)(l.P.div,{className:"bg-white dark:bg-gray-900/80 rounded-xl p-4 border border-gray-200 dark:border-[#a5b4fc]/20 hover:border-gray-300 dark:hover:border-[#60a5fa]/30 backdrop-blur-sm",variants:A,whileHover:"hover",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(v,{status:e.status}),(0,r.jsxs)("span",{className:"font-medium text-black dark:text-[#F2F2F2]",children:["$",e.amount]})]}),(0,r.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.date})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,r.jsx)("span",{className:"text-xs px-3 py-1 rounded-full ".concat(w[e.status]),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["TX: ",j(e.id)]})]})]},e.id))})]})]}),(0,r.jsx)(l.P.div,{className:"p-6 border-t border-gray-200 dark:border-[#a5b4fc]/10 flex justify-end bg-gray-50/50 dark:bg-transparent",variants:C,children:(0,r.jsx)("button",{onClick:t,className:"px-6 py-2 rounded-xl bg-white dark:bg-gray-900/80 hover:bg-gray-100 dark:hover:bg-gray-900 text-black dark:text-white transition-colors border border-gray-300 dark:border-[#a5b4fc]/20 hover:border-gray-400 dark:hover:border-[#60a5fa]/30 backdrop-blur-sm",children:"Close"})})]})})})},eA=[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"designation",label:"Designation"},{key:"salary",label:"Salary"},{key:"wallet",label:"Wallet"},{key:"company",label:"Company"}],eE=e=>{var a;let{employees:t=[],selectedEmployees:d,toggleEmployeeSelection:n,usdToToken:o,selectedTokenSymbol:i,isLoading:m,deleteEmployeeById:b,onEditEmployee:u,exchangeRate:h,handleTransaction:p,isLoadingDerived:g,needsApproval:y,isApproving:f,isSending:k,isWritePending:w,isTxLoading:v,selectedToken:j,refreshEmployees:N}=e,[C,A]=(0,s.useState)(""),[E,S]=(0,s.useState)({key:"name",direction:"asc"}),[F,T]=(0,s.useState)(1),D="amount_".concat(i),P={key:D,label:"Amount (".concat(i,")")},B=(0,s.useMemo)(()=>[...eA,P,{key:"actions",label:"Actions"}],[i]),[U,R]=(0,s.useState)(()=>new Set(["name","designation","salary",D,"wallet","actions"]));(0,s.useEffect)(()=>{R(e=>{let a=new Set(e);for(e.forEach(e=>{"string"==typeof e&&e.startsWith("amount_")&&e!==D&&a.delete(e)}),!a.has(D)&&a.has("salary")&&a.add(D);a.size<3&&B.length>=3;){let e=B.find(e=>!a.has(e.key));if(e)a.add(e.key);else break}return a})},[D,B]);let[H,I]=(0,s.useState)(!1),M=(0,s.useRef)(null),[z,_]=(0,s.useState)(""),[V,W]=(0,s.useState)(null),[X,G]=(0,s.useState)(!1),[q,J]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=e=>{let a=e.target;if(M.current&&!M.current.contains(a)){let e=document.getElementById("columns-button");e&&e.contains(a)||I(!1)}};return H?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[H]);let Y=(0,s.useMemo)(()=>t?t.filter(e=>Object.entries(e).some(e=>{let[a,t]=e;return("string"==typeof t||"number"==typeof t)&&t.toString().toLowerCase().includes(C.toLowerCase())})):[],[t,C]),K=(0,s.useMemo)(()=>E.key?[...Y].sort((e,a)=>{let t=e[E.key],r=a[E.key];if("salary"===E.key){let e=parseFloat(String(t).replace(/[^0-9.-]+/g,""))||0,a=parseFloat(String(r).replace(/[^0-9.-]+/g,""))||0;return"asc"===E.direction?e-a:a-e}let s=String(null!=t?t:"").toLowerCase(),l=String(null!=r?r:"").toLowerCase();return"asc"===E.direction?s.localeCompare(l):l.localeCompare(s)}):Y,[Y,E]),Q=Math.ceil(K.length/10),$=(0,s.useMemo)(()=>K.slice((F-1)*10,10*F),[K,F]);(0,s.useEffect)(()=>{T(1)},[C,E]);let Z=e=>{R(a=>{let t=new Set(a);return t.has(e)?t.size>3?t.delete(e):console.warn("Cannot hide more columns."):t.add(e),t})},ee=(0,s.useMemo)(()=>0!==$.length&&$.every(e=>d.includes(e.wallet)),[$,d]),ea=(0,s.useMemo)(()=>{let e=$.filter(e=>d.includes(e.wallet)).length;return e>0&&e<$.length},[$,d]),et=e=>{W(e),G(!0)},er=t.filter(e=>d.includes(e.wallet)).reduce((e,a)=>e+parseFloat(a.salary||"0"),0),es=o(er.toString());return(0,r.jsxs)("div",{className:"w-full h-full bg-transparent dark:text-white text-black shadow-sm rounded-lg overflow-hidden ",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-800 bg-transparent",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[(0,r.jsxs)("div",{className:"relative w-full md:w-auto",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search employees...",value:C,onChange:e=>A(e.target.value),className:"w-full md:w-70 px-4 py-2 pl-10 rounded-sm border border-gray-500 dark:border-gray-700 bg-transparent text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-400"}),(0,r.jsx)(x.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-gray-400"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4 w-full md:w-auto justify-end",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("select",{id:"sort-select",value:null!=(a=E.key)?a:"",onChange:e=>{S({key:e.target.value,direction:"asc"})},className:"px-3 py-2 rounded-lg border border-gray-400 dark:border-gray-500 dark:bg-black/90 text-black dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Sort by column",children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Sort by..."}),eA.map(e=>(0,r.jsx)("option",{value:e.key,children:e.label},e.key))]}),(0,r.jsx)("button",{onClick:()=>{E.key&&S(e=>({...e,direction:"asc"===e.direction?"desc":"asc"}))},disabled:!E.key,className:"p-2 rounded-lg border border-gray-400 dark:border-gray-500 bg-transparent text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Sort direction: ".concat(E.direction),title:"Sort ".concat("asc"===E.direction?"Descending":"Ascending"),children:"asc"===E.direction?(0,r.jsx)(em.A,{className:"h-4 w-4"}):(0,r.jsx)(eb.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{id:"columns-button",onClick:()=>I(e=>!e),className:"px-4 py-2 bg-transparent border border-gray-400 dark:border-gray-500 rounded-lg text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 flex items-center gap-2 text-sm","aria-haspopup":"true","aria-expanded":H,children:[(0,r.jsx)(eu.A,{className:"w-4 h-4"})," Columns"]}),H&&(0,r.jsx)("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/30 backdrop-blur-sm",onClick:()=>I(!1),children:(0,r.jsxs)("div",{ref:M,onClick:e=>e.stopPropagation(),className:"relative w-80 p-4 bg-white/80 dark:bg-black/70 backdrop-blur-lg rounded-lg shadow-xl border border-gray-300 dark:border-gray-600 flex flex-col items-center justify-center",children:[(0,r.jsx)("button",{onClick:()=>I(!1),className:"absolute top-2 right-2 text-gray-600 dark:text-gray-300 hover:text-black dark:hover:text-white","aria-label":"Close column menu",children:(0,r.jsx)(L.A,{className:"h-5 w-5"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold mb-3 text-black dark:text-white",children:"Visible Columns"}),(0,r.jsx)("div",{className:"space-y-4",children:B.map(e=>(0,r.jsxs)("label",{className:"flex items-center px-2 py-1.5 cursor-pointer text-lg text-black dark:text-white rounded hover:bg-gray-200 dark:hover:bg-gray-700",children:[(0,r.jsx)("input",{type:"checkbox",checked:U.has(e.key),onChange:()=>Z(e.key),disabled:U.has(e.key)&&U.size<=3,className:"\n                                                                    appearance-none \n                                                                    mr-2 h-4 w-4 \n                                                                    rounded-sm \n                                                                    border-2 dark:border-white \n                                                                    bg-transparent \n                                                                    dark:checked:bg-gray-100 \n                                                                    dark:checked:border-gray-800 checked:bg-indigo-600\n                                                                    transition-colors duration-200 \n                                                                    disabled:opacity-50\n                                                                "}),e.label]},e.key))})]})})]}),(0,r.jsx)("div",{className:"px-4 py-2 bg-transparent rounded-lg border border-gray-400 dark:border-gray-500 flex-shrink-0",children:(0,r.jsxs)("span",{className:"text-indigo-600 dark:text-indigo-300 font-bold text-sm",children:["1 USD = ",h.toFixed(6)," ",i]})}),(0,r.jsxs)("button",{onClick:()=>{if(0===d.length){_("Please select at least one employee to export"),setTimeout(()=>_(""),3e3);return}let e=t.filter(e=>d.includes(e.wallet)),a=["Name","Designation","Wallet Address","Salary (USD)","Amount (".concat(i,")")],r=e.map(e=>[e.name,e.designation,e.wallet,parseFloat(e.salary||"0").toFixed(2),o(e.salary||"0")]),s=new Blob([[a.join(","),...r.map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(s),n=document.createElement("a"),c=new Date().toISOString().split("T")[0];n.setAttribute("href",l),n.setAttribute("download","employee-payroll-".concat(c,".csv")),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),_("Exported ".concat(d.length," employee").concat(1!==d.length?"s":"")),setTimeout(()=>_(""),3e3)},className:"px-4 py-2 bg-transparent border border-gray-400 dark:border-gray-500 rounded-lg text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 flex items-center gap-2 text-sm\n                                       ".concat(0===d.length?"cursor-not-allowed opacity-50":"hover:bg-gray-100 dark:hover:bg-gray-800"),"aria-label":"Export selected employees",title:0===d.length?"Select employees to export":"Export ".concat(d.length," selected employee(s)"),disabled:0===d.length||m||g,children:[(0,r.jsx)(c.A,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"}),(0,r.jsx)("span",{children:"Export"})]}),(0,r.jsx)("div",{className:"ml-auto flex items-center bg-transparent px-4 py-2 rounded-lg border border-gray-400 dark:border-gray-500",children:(0,r.jsxs)("span",{className:"text-black dark:text-white text-sm",children:[d.length," / ",t.length]})})]})]})}),z&&(0,r.jsx)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"m-2 p-3 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm font-medium text-center border border-indigo-300 dark:border-indigo-700",children:z}),(0,r.jsx)("div",{className:"overflow-x-auto m-10",children:(0,r.jsxs)("table",{className:"w-full min-w-[768px] font-sans",children:[(0,r.jsx)("thead",{className:"bg-transparent dark:text-white text-black border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("tr",{className:"m-4",children:[(0,r.jsx)("th",{className:"px-4 py-4 w-12",children:(0,r.jsx)("input",{type:"checkbox",checked:ee,ref:e=>{e&&(e.indeterminate=ea)},onChange:e=>{let a=e.target.checked;$.forEach(e=>{let t=d.includes(e.wallet);(a&&!t||!a&&t)&&n(e.wallet)})},disabled:m||g||0===$.length,className:"\n                                                                    appearance-none \n                                                                    mr-2 h-4 w-4 \n                                                                    rounded-sm \n                                                                    border-2 dark:border-white \n                                                                    bg-transparent \n                                                                    dark:checked:bg-gray-400 \n                                                                    dark:checked:border-gray-800 checked:bg-indigo-600\n                                                                    transition-colors duration-200 \n                                                                    disabled:opacity-50\n                                                                ","aria-label":"Select all employees on this page"})}),B.filter(e=>U.has(e.key)).map(e=>(0,r.jsx)("th",{className:"px-4 py-3 text-left md:text-2xl text-xl md:font-extrabold font-bold  text-gray-600 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap\n                                            ".concat("salary"===e.key||e.key===D?"text-right":"text-left","\n                                            ").concat("actions"===e.key?"text-center w-32":"","\n                                            ").concat("email"===e.key||"company"===e.key?"hidden md:table-cell":"","\n                                            ").concat("wallet"===e.key?"hidden lg:table-cell":"","\n                                            "),children:"salary"===e.key?"Salary (USD)":e.key===D?"Amount (".concat(i,")"):e.label},e.key))]})}),(0,r.jsxs)("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-900 bg-transparent m-4",children:[m&&0===$.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:U.size+1,className:"px-4 py-10 text-center text-gray-500 dark:text-gray-400",children:"Loading employees..."})}),!m&&0===K.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:U.size+1,className:"px-4 py-10 text-center text-gray-500 dark:text-gray-400",children:"No employees added yet."})}),!m&&K.length>0&&0===$.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:U.size+1,className:"px-4 py-10 text-center text-gray-500 dark:text-gray-400",children:"No employees match your search/filters."})}),$.map((e,a)=>(0,r.jsxs)("tr",{className:"hover:bg-gray-100 dark:hover:bg-gray-800/20 transition-colors ".concat(d.includes(e.wallet)?"bg-indigo-50 dark:bg-indigo-900/30":""),children:[(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("input",{type:"checkbox",checked:d.includes(e.wallet),onChange:()=>n(e.wallet),disabled:m||g,className:"\n                                                                    appearance-none \n                                                                    mr-2 h-4 w-4 \n                                                                    rounded-sm \n                                                                    border-2 dark:border-white \n                                                                    bg-transparent \n                                                                    dark:checked:bg-gray-400 \n                                                                    dark:checked:border-gray-800 checked:bg-indigo-600\n                                                                    transition-colors duration-200 \n                                                                    disabled:opacity-50\n                                                                ","aria-label":"Select employee ".concat(e.name)})}),B.filter(e=>U.has(e.key)).map(a=>{var t;return(0,r.jsx)("td",{className:"px-4 py-3 md:text-xl md:font-semibold text-black dark:text-white whitespace-nowrap align-middle\n                                                ".concat("salary"===a.key||a.key===D?"text-right":"text-left","\n                                                ").concat("actions"===a.key?"text-center":"","\n                                                ").concat("email"===a.key||"company"===a.key?"hidden md:table-cell":"","\n                                                ").concat("wallet"===a.key?"hidden lg:table-cell text-sm text-gray-500 dark:text-gray-400":"","\n                                                ").concat(a.key===D?"text-indigo-600 dark:text-indigo-400":"","\n                                                ").concat("name"===a.key?"group cursor-pointer":"","\n                                                "),title:"wallet"===a.key?e.wallet:void 0,onClick:"name"===a.key?()=>et(e):void 0,children:"actions"===a.key?(0,r.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>et(e),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1 rounded disabled:opacity-50",disabled:m||g,title:"View Details",children:(0,r.jsx)(eh.A,{className:"h-4 w-4"})}),u&&(0,r.jsx)("button",{onClick:()=>u(e),className:"text-yellow-600 dark:text-yellow-400 hover:text-yellow-800 dark:hover:text-yellow-300 p-1 rounded disabled:opacity-50",disabled:m||g,title:"Edit employee",children:(0,r.jsx)(ep.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>b(e.wallet),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1 rounded disabled:opacity-50",disabled:m||g,title:"Delete employee",children:(0,r.jsx)(eg.A,{className:"h-4 w-4"})})]}):"name"===a.key?(0,r.jsxs)("div",{className:"flex items-center gap-2 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:[e.name||"N/A",(0,r.jsx)(eh.A,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity text-indigo-500 dark:text-indigo-400"})]}):"salary"===a.key?"$".concat(parseFloat(e.salary||"0").toFixed(2)):"wallet"===a.key?"".concat(e.wallet.substring(0,8),"...").concat(e.wallet.substring(e.wallet.length-6)):a.key===D?o(e.salary||"0"):null!=(t=e[a.key])?t:"N/A"},"".concat(e.wallet,"-").concat(a.key))})]},e.wallet||a))]}),d.length>0&&(0,r.jsx)("tfoot",{children:(0,r.jsxs)("tr",{className:"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[(0,r.jsxs)("td",{colSpan:U.size-!!U.has("salary")-!!U.has(D)-!!U.has("actions")+1,className:"px-4 py-3 text-right text-gray-600 dark:text-gray-300 font-medium text-sm",children:["Total Selected (",d.length,"):"]}),U.has("salary")&&(0,r.jsxs)("td",{className:"px-4 py-3 text-right text-indigo-700 dark:text-indigo-300 font-bold text-sm",children:["$",er.toFixed(2)]}),U.has(D)&&(0,r.jsxs)("td",{className:"px-4 py-3 text-right text-indigo-700 dark:text-indigo-300 font-bold text-sm",children:[es," ",i]}),U.has("actions")&&(0,r.jsx)("td",{className:"px-4 py-3"})]})})]})}),(0,r.jsx)("div",{className:"px-4 py-3 border-t border-gray-400 dark:border-gray-500 bg-transparent",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm text-black dark:text-white",children:["Showing"," ",(0,r.jsx)("span",{className:"font-medium",children:K.length>0?Math.min((F-1)*10+1,K.length):0})," ","to"," ",(0,r.jsx)("span",{className:"font-medium",children:Math.min(10*F,K.length)})," ","of"," ",(0,r.jsx)("span",{className:"font-medium",children:K.length})," ","entries ",C&&"(filtered)"]}),Q>1&&(0,r.jsxs)("div",{className:"inline-flex items-center -space-x-px rounded-md shadow-sm",children:[(0,r.jsx)("button",{onClick:()=>T(e=>Math.max(1,e-1)),disabled:1===F||m||g,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-600 dark:text-gray-300 ring-1 ring-inset ring-gray-300 dark:ring-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous page",children:(0,r.jsx)(ey.A,{className:"h-5 w-5"})}),(0,r.jsxs)("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-black dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-gray-700",children:["Page ",F," of ",Q]}),(0,r.jsx)("button",{onClick:()=>T(e=>Math.min(Q,e+1)),disabled:F===Q||m||g,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-600 dark:text-gray-300 ring-1 ring-inset ring-gray-300 dark:ring-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next page",children:(0,r.jsx)(ef.A,{className:"h-5 w-5"})})]}),(0,r.jsx)(l.P.div,{className:"mt-6 mb-4 mx-4 flex flex-row justify-end",whileHover:{scale:d.length>0&&!g?1.02:1},whileTap:{scale:d.length>0&&!g?.98:1},transition:{duration:.2},children:(0,r.jsxs)("button",{onClick:p,disabled:g||0===d.length||m,className:"w-auto px-6 py-3 rounded-xl font-medium text-base transition-all flex items-center justify-center gap-3\n                      ".concat(g||0===d.length||m?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed border border-gray-400 dark:border-gray-600":"bg-gradient-to-r from-[#60a5fa] to-[#3b82f6] text-white hover:from-[#3b82f6] hover:to-[#2563eb] shadow-lg shadow-[#3b82f6]/20 hover:shadow-[#3b82f6]/30"),children:[(0,r.jsx)(O.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:f?"Approving ".concat(i||(null==j?void 0:j.symbol),"..."):k||w||v?"Processing Transaction...":0===d.length?"Select Employees to Pay":y&&(null==j?void 0:j.address)!=="NATIVE_ADDRESS"?"Approve & Send ".concat(i||(null==j?void 0:j.symbol)):"Pay Selected Employees (".concat(d.length,")")})]})})]})}),(0,r.jsx)(eC,{isOpen:X,onClose:()=>{G(!1),W(null)},employee:V})]})},eS=e=>{let{exchangeRate:a=1,selectedTokenSymbol:t,employees:s,isConnected:n,selectedEmployees:o,toggleEmployeeSelection:i,toggleAllEmployees:c,allEmployeesSelected:x,handleTransaction:m,usdToToken:b,isLoadingDerived:u,needsApproval:h,isApproving:p,isSending:g,isWritePending:y,isTxLoading:f,isTxSuccess:k,isTxError:w,txHash:v,txError:j,approvalTxHash:N,showPaymentStatus:C,hasTransactionActivity:A,getExplorerUrl:E,selectedToken:S,handleAddEmployeeClick:F,handleEditEmployee:T,deleteEmployeeById:D}=e;return(0,r.jsx)("div",{className:"max-h-screen w-[70vw] flex flex-col md:mt-10",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)(l.P.div,{className:"space-y-6",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5},children:(0,r.jsx)(d.N,{children:C&&A&&(0,r.jsx)(l.P.div,{initial:{opacity:0,height:0,marginTop:0},animate:{opacity:1,height:"auto",marginTop:24},exit:{opacity:0,height:0,marginTop:0},transition:{duration:.3},children:(0,r.jsx)(ex,{txError:j,isWritePending:y,isTxLoading:f,isTxSuccess:k,isTxError:w,approvalTxHash:N,isApproving:p,txHash:v,getExplorerUrl:E,needsApproval:h,selectedTokenSymbol:null==S?void 0:S.symbol,selectedEmployeesCount:o.length})})})}),(0,r.jsx)(l.P.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5},children:n?(0,r.jsx)(eE,{employees:s,selectedEmployees:o,toggleEmployeeSelection:i,usdToToken:b,selectedTokenSymbol:t||(null==S?void 0:S.symbol),isLoading:u,exchangeRate:a,deleteEmployeeById:D,onEditEmployee:T,handleTransaction:m,isLoadingDerived:u,needsApproval:h,isApproving:p,isSending:g,isWritePending:y,isTxLoading:f,selectedToken:S}):(0,r.jsxs)(l.P.div,{className:"dark:bg-[#0D1321] rounded-lg p-12 border border-[#1F2A45] flex flex-col items-center justify-center space-y-6 text-center",style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4},children:[(0,r.jsx)("div",{className:"p-4 bg-[#60DFCD]/10 rounded-full border border-[#60DFCD]/30",children:(0,r.jsx)(z.A,{className:"w-12 h-12 text-[#60DFCD]"})}),(0,r.jsxs)("div",{className:"space-y-2 max-w-md",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Connect Your Wallet"}),(0,r.jsx)("p",{className:"text-[#486581]",children:"Connect your wallet to start managing employee payments with cryptocurrency"})]})]})})]})})};var eF=t(71007),eT=t(48136),eD=t(28883),eP=t(64261),eB=t(5196);let eU=e=>{let{isOpen:a,onClose:t,onUploadSuccess:n}=e,[o,x]=(0,s.useState)(!1),[m,b]=(0,s.useState)(null),[u,h]=(0,s.useState)(!1),[p,g]=(0,s.useState)(null),y=(0,s.useRef)(null),f=e=>{e.preventDefault(),e.stopPropagation(),x("dragenter"===e.type||"dragover"===e.type)},k=e=>{var a;g(null);let t=null==(a=e.name.split(".").pop())?void 0:a.toLowerCase();return t&&["csv","xls","xlsx"].includes(t)?e.size>5242880?void g({success:!1,message:"File too large",details:["Maximum file size is 5MB"]}):void b(e):void g({success:!1,message:"Invalid file format",details:["Please upload a CSV or Excel file (.csv, .xls, .xlsx)"]})},w=async()=>{var e,a,r,s,l;if(!m)return void g({success:!1,message:"No file selected",details:["Please select a file to upload"]});try{h(!0),g(null);let a=new FormData;a.append("file",m);let r=await eN.U.bulkUploadEmployees(a);"success"===r.status?(g({success:!0,message:"Upload successful",details:["".concat((null==(e=r.data)?void 0:e.uploadedCount)||"Multiple"," employees added successfully.")]}),setTimeout(()=>{n(),setTimeout(()=>t(),1500)},1500)):g({success:!1,message:"Upload failed",details:r.errors||[r.message||"Unknown error occurred"]})}catch(e){console.error("Upload error:",e),g({success:!1,message:"Upload failed",details:(null==(r=e.response)||null==(a=r.data)?void 0:a.errors)||[(null==(l=e.response)||null==(s=l.data)?void 0:s.message)||e.message||"Unknown error occurred"]})}finally{h(!1)}};return a?(0,r.jsx)(d.N,{children:(0,r.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/75 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:t,children:(0,r.jsxs)(l.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20},onClick:e=>e.stopPropagation(),className:"bg-white dark:bg-gradient-to-br dark:from-gray-900/90 dark:to-black/95 w-full max-w-2xl rounded-2xl border border-gray-200 dark:border-[#a5b4fc]/20 overflow-hidden shadow-2xl shadow-black/60 backdrop-blur-xl",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-[#a5b4fc]/10",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2.5 rounded-full bg-blue-100 dark:bg-[#3b82f6]/20 shadow-inner shadow-blue-200/50 dark:shadow-[#60a5fa]/10",children:(0,r.jsx)(B.A,{className:"w-6 h-6 text-blue-600 dark:text-[#93c5fd]"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-black dark:text-white tracking-tight",children:"Bulk Upload Employees"})]}),(0,r.jsx)(l.P.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:t,className:"text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-[#93c5fd] transition-colors p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-white/5","aria-label":"Close modal",children:(0,r.jsx)(L.A,{className:"w-5 h-5"})})]})}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-900/40 backdrop-blur-sm rounded-xl p-5 border border-gray-200 dark:border-gray-800/60 flex items-start space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-blue-100 dark:bg-[#3b82f6]/10 flex items-center justify-center border border-blue-200 dark:border-[#3b82f6]/20",children:(0,r.jsx)(eP.A,{className:"w-6 h-6 text-blue-600 dark:text-[#93c5fd]"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-black dark:text-white text-lg mb-1",children:"Download Template"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Use our template to ensure your data is formatted correctly"}),(0,r.jsxs)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{let e=new Blob(["name,email,designation,salary,wallet\nJohn Doe,john@example.com,Developer,5000,0x1234567890abcdef1234567890abcdef12345678\nJane Smith,jane@example.com,Designer,4500,0xabcdef1234567890abcdef1234567890abcdef12"],{type:"text/csv"}),a=window.URL.createObjectURL(e),t=document.createElement("a");t.setAttribute("hidden",""),t.setAttribute("href",a),t.setAttribute("download","employee_template.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"text-blue-600 dark:text-[#93c5fd] hover:text-blue-700 dark:hover:text-[#60a5fa] transition-colors flex items-center",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{className:"font-medium",children:"Download Template"})]})]})]}),(0,r.jsxs)("div",{className:"relative border-2 border-dashed rounded-xl p-8 text-center transition-colors backdrop-blur-sm ".concat(o?"border-blue-500 dark:border-[#60a5fa] bg-blue-50 dark:bg-[#3b82f6]/10":m?"border-blue-300 dark:border-[#60a5fa]/40 bg-blue-50/50 dark:bg-[#3b82f6]/5":"border-gray-300 dark:border-gray-700/50 hover:border-gray-400 dark:hover:border-gray-600/70 bg-gray-50/50 dark:bg-gray-900/20"),onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:e=>{e.preventDefault(),e.stopPropagation(),x(!1),e.dataTransfer.files.length>0&&k(e.dataTransfer.files[0])},children:[(0,r.jsx)("input",{ref:y,type:"file",accept:".csv,.xlsx,.xls",onChange:e=>{e.target.files&&e.target.files.length>0&&k(e.target.files[0])},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Upload CSV or Excel file",title:"Upload employee data file",disabled:u}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full mx-auto flex items-center justify-center border ".concat(m?"bg-blue-100 dark:bg-[#3b82f6]/10 border-blue-200 dark:border-[#3b82f6]/30":"bg-gray-100 dark:bg-gray-900/60 border-gray-300 dark:border-gray-700/50"),children:u?(0,r.jsx)(ej.A,{className:"w-10 h-10 text-blue-600 dark:text-[#93c5fd] animate-spin"}):m?(0,r.jsx)(eB.A,{className:"w-10 h-10 text-blue-600 dark:text-[#93c5fd]"}):(0,r.jsx)(B.A,{className:"w-10 h-10 text-blue-600 dark:text-[#93c5fd]"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-lg text-black dark:text-white mb-2",children:m?m.name:"Drop your file here"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:m?"".concat((m.size/1024).toFixed(1),"KB - ").concat(m.type):"Support for CSV and Excel files"}),m&&!u&&(0,r.jsx)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{b(null),g(null),y.current&&(y.current.value="")},className:"text-red-600 dark:text-red-400 text-sm hover:text-red-700 dark:hover:text-red-300 transition-colors mt-3",children:"Remove file"})]})]})]}),p&&(0,r.jsx)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"rounded-xl p-5 border ".concat(p.success?"bg-green-50 dark:bg-[#3b82f6]/5 border-green-300 dark:border-[#3b82f6]/20":"bg-red-50 dark:bg-red-400/10 border-red-300 dark:border-red-400/20"),children:(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,r.jsx)("div",{className:"p-2 rounded-full ".concat(p.success?"bg-green-100 dark:bg-[#3b82f6]/10":"bg-red-100 dark:bg-red-400/10"),children:p.success?(0,r.jsx)(eB.A,{className:"w-5 h-5 text-green-600 dark:text-[#93c5fd]"}):(0,r.jsx)(i.A,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-base ".concat(p.success?"text-green-700 dark:text-[#93c5fd]":"text-red-700 dark:text-red-400"),children:p.message}),p.details&&p.details.length>0&&(0,r.jsx)("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-300",children:p.details.map((e,a)=>(0,r.jsx)("li",{children:e},a))})]})]})}),(0,r.jsx)("div",{className:"p-5 rounded-lg border border-blue-200 dark:border-[#a5b4fc]/20 bg-blue-50/50 dark:bg-[#a5b4fc]/5 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"p-2 rounded-full bg-blue-100 dark:bg-[#a5b4fc]/10 mt-0.5",children:(0,r.jsx)(V.A,{className:"w-4 h-4 text-blue-600 dark:text-[#ddd6fe] flex-shrink-0"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-black dark:text-white font-medium mb-2",children:"Important Guidelines"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-gray-600 dark:text-gray-400 text-sm",children:[(0,r.jsx)("li",{children:"Required fields: name, email, designation, salary, wallet"}),(0,r.jsx)("li",{children:"Wallet addresses must be valid Ethereum addresses"}),(0,r.jsx)("li",{children:"Maximum 100 employees per upload"}),(0,r.jsx)("li",{children:"File size should not exceed 5MB"})]})]})]})})]}),(0,r.jsx)("div",{className:"px-6 py-5 border-t border-gray-200 dark:border-gray-800/60 bg-gray-50/50 dark:bg-transparent backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,className:"px-6 py-3 rounded-xl border border-gray-300 dark:border-gray-700/80 bg-white dark:bg-gray-800/50 text-black dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black dark:hover:text-white hover:border-gray-400 dark:hover:border-gray-600 transition-all duration-200 backdrop-blur-sm",disabled:u,children:"Cancel"}),(0,r.jsx)(l.P.button,{whileHover:u||!m||(null==p?void 0:p.success)?{}:{scale:1.02},whileTap:u||!m||(null==p?void 0:p.success)?{}:{scale:.98},onClick:w,disabled:!m||u||(null==p?void 0:p.success)===!0,className:"px-6 py-3 rounded-xl transition-all font-medium\n                  ".concat(!m||u||(null==p?void 0:p.success)===!0?"bg-gradient-to-r from-blue-400/70 to-blue-500/70 dark:from-[#60a5fa]/40 dark:to-[#3b82f6]/40 text-white/70 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 dark:from-[#60a5fa] dark:to-[#3b82f6] dark:hover:from-[#3b82f6] dark:hover:to-[#2563eb] text-white shadow-lg shadow-blue-500/20 dark:shadow-[#3b82f6]/20 hover:shadow-blue-500/30 dark:hover:shadow-[#3b82f6]/30"),children:u?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(ej.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(null==p?void 0:p.success)?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(eB.A,{className:"w-4 h-4 mr-2"}),"Uploaded"]}):"Upload & Process"})]})})]})})}):null},eL=e=>{let{label:a,name:t,icon:s,placeholder:l,type:d="text",error:n,value:o,disabled:i=!1,onChange:c}=e;return(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsxs)("label",{htmlFor:t,className:"flex gap-2 items-center text-sm font-medium text-gray-600 dark:text-gray-400",children:[s&&(0,r.jsx)(s,{className:"w-4 h-4 text-blue-600 dark:text-[#93c5fd]"}),a]}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("input",{id:t,type:d,name:t,value:o,onChange:c,className:"w-full p-3 bg-gray-100 dark:bg-gray-900/50 backdrop-blur-sm border rounded-xl\n                text-black dark:text-white focus:outline-none focus:ring-2 transition-all placeholder-gray-500 dark:placeholder-gray-500 text-base\n                ".concat(i?"opacity-60 cursor-not-allowed bg-gray-200 dark:bg-gray-800/60":"","\n                ").concat(n?"border-red-500/70 focus:border-red-500 focus:ring-red-500/30 dark:border-red-400/70 dark:focus:border-red-400 dark:focus:ring-red-400/30":"border-gray-300 dark:border-gray-800/60 focus:border-blue-500 focus:ring-blue-500/30 dark:focus:border-[#60a5fa] dark:focus:ring-[#60a5fa]/30"),placeholder:l,disabled:i,"aria-invalid":!!n,"aria-describedby":n?"".concat(t,"-error"):void 0})}),n&&(0,r.jsx)("p",{id:"".concat(t,"-error"),className:"text-sm text-red-600 dark:text-red-400 mt-1",children:n})]})},eR=e=>{let{isOpen:a,onClose:t,onAddEmployee:n,onUpdateEmployee:o,onUploadSuccess:i,editEmployee:c}=e,[x,m]=(0,s.useState)(!1),[b,u]=(0,s.useState)({}),{user:h}=(0,I.A)(),[p,g]=(0,s.useState)({name:"",designation:"",wallet:"",salary:"",email:"",company:(null==h?void 0:h.company.toString())||""});(0,s.useEffect)(()=>{c?g({name:c.name,designation:c.designation,wallet:c.wallet,salary:c.salary,email:c.email||"",company:(null==h?void 0:h.company.toString())||""}):g({name:"",designation:"",wallet:"",salary:"",email:"",company:(null==h?void 0:h.company)||""})},[c,h]);let y=e=>{let{name:a,value:t}=e.target;g(e=>{var r;return{...e,[a]:t,company:(null==h||null==(r=h.company)?void 0:r.toString())||""}}),b[a]&&u(e=>({...e,[a]:void 0}))};if(!a)return null;let f=!!c;return(0,r.jsxs)(d.N,{children:[a&&(0,r.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 dark:bg-black/75 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:t,children:(0,r.jsxs)(l.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20},onClick:e=>e.stopPropagation(),className:"bg-white dark:bg-gradient-to-br dark:from-gray-900 dark:to-black/95 w-full md:max-w-4xl max-w-2xl rounded-2xl border border-gray-200 dark:border-[#a5b4fc]/20 overflow-hidden shadow-2xl shadow-black/60 backdrop-blur-xl",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-[#a5b4fc]/10",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2.5 rounded-full bg-blue-100 dark:bg-[#3b82f6]/20 shadow-inner shadow-blue-200/50 dark:shadow-[#60a5fa]/10",children:(0,r.jsx)(eF.A,{className:"w-6 h-6 text-blue-600 dark:text-[#93c5fd]"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-black dark:text-white tracking-tight",children:f?"Edit Employee":"Add New Employee"})]}),(0,r.jsx)(l.P.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:t,className:"text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-[#93c5fd] transition-colors p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-white/5","aria-label":"Close modal",children:(0,r.jsx)(L.A,{className:"w-5 h-5"})})]})}),(0,r.jsxs)("form",{className:"p-6 space-y-6",onSubmit:e=>{e.preventDefault();let a={};if(Object.entries(p).forEach(e=>{let[t,r]=e;r.toString().trim()||(a[t]="This field is required")}),Object.keys(a).length>0)return void u(a);u({}),c&&o?o(c.wallet,p):(n(p),g({name:"",designation:"",wallet:"",salary:"",email:"",company:(null==h?void 0:h.company.toString())||""})),t()},children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(eL,{label:"Name",name:"name",icon:eF.A,placeholder:"John Doe",error:b.name,value:p.name,onChange:y}),(0,r.jsx)(eL,{label:"Company",name:"company",icon:eT.A,placeholder:"ABC Corp",error:b.company,value:(null==h?void 0:h.company.toString())||"",onChange:y,disabled:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(eL,{label:"Designation",name:"designation",type:"string",icon:ek.A,placeholder:"Senior Developer",error:b.designation,value:p.designation,onChange:y}),(0,r.jsx)(eL,{label:"Email",name:"email",icon:eD.A,type:"email",placeholder:"john@abc.com",error:b.email,value:p.email,onChange:y})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(eL,{label:"Wallet Address",name:"wallet",type:"string",icon:z.A,placeholder:"0x...",error:b.wallet,value:p.wallet,onChange:y}),(0,r.jsx)(eL,{label:"Salary (USD)",name:"salary",type:"string",icon:O.A,placeholder:"5000",error:b.salary,value:p.salary,onChange:y})]}),(0,r.jsx)("div",{className:"pt-6 mt-6 border-t border-gray-200 dark:border-gray-800 bg-gray-50/50  dark:bg-transparent",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[!f&&(0,r.jsxs)(l.P.button,{type:"button",whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>m(!0),className:"w-full sm:w-auto flex items-center justify-center gap-2 rounded-xl border border-gray-300 bg-gray-100 text-gray-700 hover:bg-gray-200 hover:text-black hover:border-gray-400 dark:border-gray-700/80 dark:bg-gray-800/50 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white dark:hover:border-gray-600 transition-all px-4 py-3 backdrop-blur-sm",children:[(0,r.jsx)(B.A,{className:"w-5 h-5 text-blue-600 dark:text-[#93c5fd]"}),(0,r.jsx)("span",{className:"font-medium",children:"Bulk Upload"})]}),f&&(0,r.jsx)("div",{className:"hidden sm:block sm:w-auto"})," ",(0,r.jsxs)("div",{className:"flex gap-4 w-full sm:w-auto",children:[(0,r.jsx)(l.P.button,{type:"button",whileHover:{scale:1.03},whileTap:{scale:.97},onClick:t,className:"flex-1 sm:flex-none px-5 py-3 rounded-xl border border-gray-300 bg-gray-100 text-gray-700 hover:bg-gray-200 hover:text-black hover:border-gray-400 dark:border-gray-700/80 dark:bg-gray-800/50 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white dark:hover:border-gray-600 transition-all backdrop-blur-sm",children:"Cancel"}),(0,r.jsx)(l.P.button,{type:"submit",whileHover:{scale:1.03},whileTap:{scale:.97},className:"flex-1 sm:flex-none px-5 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 dark:from-[#60a5fa] dark:to-[#3b82f6] dark:hover:from-[#3b82f6] dark:hover:to-[#2563eb] text-white transition-all shadow-lg shadow-blue-500/20 dark:shadow-[#3b82f6]/20 hover:shadow-blue-500/30 dark:hover:shadow-[#3b82f6]/30 font-medium",children:f?"Update Employee":"Add Employee"})]})]})})]})]})},"add-employee-modal"),(0,r.jsx)(eU,{isOpen:x,onClose:()=>m(!1),onUploadSuccess:i},"bulk-upload-modal")]})};var eH=t(31530);let eI=JSON.parse('{"H":[{"inputs":[],"name":"InsufficientAllowance","type":"error"},{"inputs":[],"name":"InsufficientBalance","type":"error"},{"inputs":[],"name":"LengthMismatch","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"inputs":[],"name":"RefundFailed","type":"error"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"SafeERC20FailedOperation","type":"error"},{"inputs":[],"name":"TransferFailed","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"token","type":"address"},{"indexed":false,"internalType":"uint256","name":"totalRecipients","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalAmount","type":"uint256"}],"name":"BulkTransferExecuted","type":"event"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address[]","name":"recipients","type":"address[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"}],"name":"bulkTransfer","outputs":[],"stateMutability":"payable","type":"function"}]}');var eM=t(14493),eO=t(53031),ez=t(89769),e_=t(84661),eV=t(75162),eW=t(13244),eX=t(56680),eG=t(12509);let eq=(0,eX.A)(()=>{let[e,a]=(0,s.useState)(!0),[t,l]=(0,s.useState)(1),[d,n]=(0,s.useState)(""),[o,i]=(0,s.useState)(!1),[c,x]=(0,s.useState)(!1),[m,b]=(0,s.useState)([]),[u,h]=(0,s.useState)(null),[g,y]=(0,s.useState)(!0),[k,w]=(0,s.useState)(!1),[v,j]=(0,s.useState)(null),[N,C]=(0,s.useState)(""),[A,E]=(0,s.useState)([]),[F,T]=(0,s.useState)(""),[D,P]=(0,s.useState)(!1),[B,U]=(0,s.useState)(!1),[L,R]=(0,s.useState)(!1),[H,I]=(0,s.useState)(void 0),[O,z]=(0,s.useState)(!1),[_,V]=(0,s.useState)(S[0]),[W,G]=(0,s.useState)(ee[S[0].id][0]),{address:q,isConnected:J,chainId:Y}=(0,X.F)(),K=(0,eO.U)(),{writeContractAsync:$,isPending:ea,data:et}=(0,ez.x)(),{isLoading:er,isSuccess:es,isError:el}=(0,e_.g)({hash:et}),ed=B||L||ea||er;(0,s.useEffect)(()=>{en(),(async()=>{try{let e=localStorage.getItem("user");if(e){let{company:a}=JSON.parse(e);C(a)}}catch(e){console.error("Failed to fetch company info:",e)}})()},[]),(0,s.useEffect)(()=>{if(Y){let a=S.find(e=>e.id===Y);if(a){var e;V(a),(null==(e=ee[a.id])?void 0:e.length)>0&&G((d?ee[a.id].find(e=>e.symbol===d):void 0)||ee[a.id][0])}}},[Y,d]),(0,s.useEffect)(()=>{if(d&&_){let e=(ee[_.id]||[]).find(e=>e.symbol===d);e&&G(e)}},[d,_]),(0,s.useEffect)(()=>{if(es){eg(),A.length;let e=setTimeout(()=>{E([]);let e=setTimeout(()=>{z(!1),I(void 0),T("")},5e3);return()=>clearTimeout(e)},2e3);return()=>clearTimeout(e)}},[es,et]),(0,s.useEffect)(()=>{let e=null;return F&&(e=setTimeout(()=>{T("")},6e3)),()=>{e&&clearTimeout(e)}},[F]);let en=async()=>{try{y(!0);let e=await eN.U.getAllEmployees();"success"==e.status&&b(e.employees||[])}catch(e){console.error("Failed to fetch employees:",e),eH.oR.error("Failed to load employees")}finally{y(!1)}},ei=()=>Z[_.id],ec=e=>(parseFloat(e)*t).toFixed(6),ex=()=>m.filter(e=>A.includes(e.wallet)).reduce((e,a)=>e+parseFloat(a.salary),0),em=()=>{let e=m.filter(e=>A.includes(e.wallet));return{recipients:e.map(e=>e.wallet),amounts:e.map(e=>{let a=ec(e.salary);return(0,Q.XS)(a,W.decimals)})}},{data:eb,refetch:eu}=(0,eW.Q)({address:(null==W?void 0:W.address)!==f?null==W?void 0:W.address:void 0,abi:eM.xw,functionName:"allowance",args:[q,ei()],chainId:null==_?void 0:_.id,query:{enabled:J&&!!W&&!!q&&(null==W?void 0:W.address)!==f&&!!ei()}});(0,s.useEffect)(()=>{if((null==W?void 0:W.address)!==f&&void 0!==eb&&A.length>0)try{let e=ex(),a=(0,Q.XS)(ec(e.toString()),W.decimals);P(eb<a)}catch(e){}else P(!1)},[eb,A,W]),(0,s.useEffect)(()=>{J&&W&&q&&(null==W?void 0:W.address)!==f&&eu()},[null==W?void 0:W.address,null==_?void 0:_.id,eu,J,q,W]);let eh=A.length===m.length,ep=async(e,a,t,r)=>{R(!0),console.log("Sending final transaction...");try{W.address===f?(console.log("Sending native token transfer"),await $({address:e,abi:eI.H,functionName:"bulkTransfer",args:[f,a,t],value:r,chainId:_.id})):(console.log("Sending ERC20 token transfer"),await $({address:e,abi:eI.H,functionName:"bulkTransfer",args:[W.address,a,t],chainId:_.id})),console.log("Transaction sent successfully")}catch(e){throw console.error("Error in sendTransactionAfterApproval:",e),e}finally{R(!1)}},eg=async()=>{if(!et||!N)return void console.error("Missing transaction hash or company name");try{let e=m.filter(e=>A.includes(e.wallet)),a=e.reduce((e,a)=>e+parseFloat(a.salary),0).toFixed(2),t=e.map(e=>({wallet:e.wallet,amount:e.salary})),r={company:N,employees:t,totalAmount:a,tokenSymbol:W.symbol,transactionHash:et,chain:_.name},s=await p.U.addPayroll(r);"success"===s.status?eH.oR.success("Payroll record saved successfully"):eH.oR.error("Failed to save payroll record")}catch(e){console.error("Error logging payroll transaction:",e),eH.oR.error("Failed to save payroll record")}},ey=async()=>{if(T(""),z(!0),0===A.length)return void T("Please select at least one employee to pay");try{let e=ei();if(!e)return void T("No transfer contract available for this network");let{recipients:a,amounts:t}=em(),r=t.reduce((e,a)=>e+a,BigInt(0));if(W.address!==f&&D){U(!0);try{let s=await $({address:W.address,abi:eM.xw,functionName:"approve",args:[e,r],chainId:_.id});I(s);let l=await (0,eV.n)(K,{chainId:_.id,hash:s});if("success"!==l.status)throw Error("Approval transaction failed");U(!1),await ep(e,a,t,r)}catch(e){U(!1),T(e.message||"Approval failed");return}}else await ep(e,a,t,r)}catch(e){R(!1),T(e.message||"Transaction failed")}},ef=()=>{h(null),i(!0)},ek=async()=>{if(v)try{await eN.U.deleteEmployee(v),b(e=>e.filter(e=>e.wallet!==v)),eH.oR.success("Employee deleted successfully")}catch(e){console.error("Failed to delete employee:",e),eH.oR.error("Failed to delete employee")}finally{w(!1),j(null)}},ew=async e=>{try{let a=(await eN.U.addEmployee(e)).message;b(e=>[...e,a]),i(!1),en(),eH.oR.success("Employee added successfully")}catch(e){console.error("Failed to add employee:",e),eH.oR.error("Failed to add employee")}},ev=async(e,a)=>{try{let t=(await eN.U.updateEmployee(e,a)).data;b(a=>a.map(a=>a.wallet===e?t:a)),i(!1),h(null),eH.oR.success("Employee updated successfully"),en()}catch(e){console.error("Failed to update employee:",e),eH.oR.error("Failed to update employee")}},ej=ed||es||el||!!F||!!H||!!et;return(0,r.jsx)("div",{className:"relative h-screen w-screen dark:text-white text-black p-6 z-10",children:(0,r.jsxs)("div",{className:"flex flex-col max-w-screen max-h-screen items-center m-10",children:[(0,r.jsx)(M,{onConfigurePayments:()=>a(!0),onAddEmployee:ef,onBulkUpload:()=>{x(!0)}}),(0,r.jsx)(eS,{exchangeRate:t,selectedTokenSymbol:d,employees:m,isConnected:J,selectedEmployees:A,toggleEmployeeSelection:e=>{E(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},toggleAllEmployees:()=>{eh?E([]):E(m.map(e=>e.wallet))},allEmployeesSelected:eh,handleTransaction:ey,usdToToken:ec,isLoadingDerived:ed,needsApproval:D,isApproving:B,isSending:L,isWritePending:ea,isTxLoading:er,isTxSuccess:es,isTxError:el,txHash:et,txError:F,approvalTxHash:H,showPaymentStatus:O,hasTransactionActivity:ej,getExplorerUrl:e=>{var a,t;let r=null==(t=_.blockExplorers)||null==(a=t.default)?void 0:a.url;return r?"".concat(r,"/tx/").concat(e):"#"},selectedToken:W,handleAddEmployeeClick:ef,handleEditEmployee:e=>{h(e),i(!0)},deleteEmployeeById:e=>{j(e),w(!0)}}),(0,r.jsx)(eo,{isOpen:e,onClose:()=>a(!1),onExchangeRateUpdate:(e,a)=>{l(e),n(a)}}),(0,r.jsx)(eR,{isOpen:o,onClose:()=>{i(!1),h(null)},onAddEmployee:ew,onUpdateEmployee:ev,editEmployee:u,onUploadSuccess:()=>{en(),x(!1)}}),(0,r.jsx)(eU,{isOpen:c,onClose:()=>x(!1),onUploadSuccess:()=>{en(),x(!1)}}),k&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto dark:bg-black dark:text-white text-black backdrop-blur-sm flex items-center justify-center",children:(0,r.jsxs)("div",{className:"dark:bg-[#1A1F2E] rounded-lg p-6 w-full max-w-md mx-4 shadow-xl border border-gray-700 animate-fade-in",children:[(0,r.jsx)("h3",{className:"text-xl font-medium dark:text-white mb-4",children:"Confirm Deletion"}),(0,r.jsx)("p",{className:"dark:text-gray-300 mb-6",children:"Are you sure you want to delete this employee? This action cannot be undone."}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{w(!1),j(null)},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md text-white transition-colors duration-200",children:"Cancel"}),(0,r.jsx)("button",{onClick:ek,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-md text-white transition-colors duration-200",children:"Delete"})]})]})})]})})},(0,r.jsx)(eG.A,{}))},56680:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var r=t(95155),s=t(12115);let l=function(e,a){return function(t){let[l,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if("complete"===document.readyState)d(!0);else{let e=()=>d(!0);return window.addEventListener("load",e),()=>window.removeEventListener("load",e)}},[]),l?(0,r.jsx)(e,{...t}):a}}}},e=>{var a=a=>e(e.s=a);e.O(0,[844,8451,794,899,9871,9333,1143,5196,8441,1684,7358],()=>a(51047)),_N_E=e.O()}]);